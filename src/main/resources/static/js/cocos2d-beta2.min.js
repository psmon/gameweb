/************************************************************************\
| Cocos2D.js Standalone Beta 2 Based on v0.2.0-rc1                       |
|                                                                        |
| Copyright (c) 2010-2012 Ryan Williams                                  |
|                                                                        |
| Permission is hereby granted, free of charge, to any person obtaining  |
| a copy of this software and associated documentation files (the        |
| "Software"), to deal in the Software without restriction, including    |
| without limitation the rights to use, copy, modify, merge, publish,    |
| distribute, sublicense, and/or sell copies of the Software, and to     |
| permit persons to whom the Software is furnished to do so, subject to  |
| the following conditions:                                              |
|                                                                        |
| The above copyright notice and this permission notice shall be         |
| included in all copies or substantial portions of the Software.        |
|                                                                        |
| THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,        |
| EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF     |
| MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND                  |
| NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE |
| LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION |
| OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION  |
| WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.        |
\************************************************************************/

(function(e){var t={resources:{},assetURL:""};(function(){typeof t=="undefined"&&(window.__jah__={resources:{},assetURL:"assets"}),t.resources["/__builtin__/events.js"]={data:function(e,t,n,r,i,s){function u(e,t){t&&Object.defineProperty(this,"cancelable",{value:!0,writable:!1}),this.type=e}function a(){u.apply(this,arguments)}function f(e,t){var n,r=e;while(!(n=Object.getOwnPropertyDescriptor(r,t))){r=Object.getPrototypeOf(r);if(!r)break}if(!n)throw new Error("Unable to find property: "+t);var i=function(e,n){var r=new a("beforechange",!0);return r.target={object:e,property:t},r.newValue=n,o.triggerProperty(e,t,r.type,r),r},s=function(e,n){var r=new a("change");return r.target={object:e,property:t},r.oldValue=n,o.triggerProperty(e,t,r.type,r),r};if(n.writable){var u=n.value,f,l=function(){return u},c=function(e){var t=i(this,e);t.defaultPrevented||(f=u,u=e,t=s(this,f))};c.__trigger=!0,delete n.value,delete n.writable,n.get=l,n.set=c,Object.defineProperty(e,t,n)}else if(n.set&&!n.set.__trigger){var h=n.set,u=e[t],f,c=function(e){var n=i(this,e);n.defaultPrevented||(f=u,h.call(this,e),u=this[t],s(this,f))};n.set=c,Object.defineProperty(e,t,n)}}function l(e,t){var n=Object.getOwnPropertyDescriptor(e,"__jahEventListeners__");return n||Object.defineProperty(e,"__jahEventListeners__",{value:{}}),t?(e.__jahEventListeners__[t]||(e.__jahEventListeners__[t]={}),e.__jahEventListeners__[t]):e.__jahEventListeners__}function c(e,t,n){var r=Object.getOwnPropertyDescriptor(e,"__jahPropertyEventListeners__");return r||Object.defineProperty(e,"__jahPropertyEventListeners__",{value:{}}),t?(e.__jahPropertyEventListeners__[t]||(e.__jahPropertyEventListeners__[t]={}),n?(e.__jahPropertyEventListeners__[t][n]||(e.__jahPropertyEventListeners__[t][n]={}),e.__jahPropertyEventListeners__[t][n]):e.__jahPropertyEventListeners__[t]):e.__jahPropertyEventListeners__}var o={};Object.defineProperty(u.prototype,"defaultPrevented",{value:!1,writable:!1}),Object.defineProperty(u.prototype,"cancelable",{value:!1,writable:!1}),u.prototype={constructor:u,preventDefault:function(){this.cancelable&&Object.defineProperty(this,"defaultPrevented",{value:!0,writable:!1})}},o.Event=u,a.prototype=Object.create(u.prototype),o.PropertyEvent=a;var h=0,p=0;o.EventListener=function(e,t,n){this.source=e,this.eventName=t,this.handler=n,this.id=h++,l(e,t)[this.id]=this},o.PropertyEventListener=function(e,t,n,r){this.source=e,this.eventName=n,this.property=t,this.handler=r,this.id=p++,c(e,t,n)[this.id]=this},o.PropertyEventListener.prototype=Object.create(o.EventListener),o.addListener=function(e,t,n){if(t instanceof Array){var r=[];for(var i=0,s=t.length;i<s;i++)r.push(o.addListener(e,t[i],n));return r}return new o.EventListener(e,t,n)},o.addListenerOnce=function(e,t,n){var r=o.addListener(e,t,function(){n.apply(this,arguments),o.removeListener(r),r=null});return r},o.addPropertyListener=function(e,t,n,r){var i=[],s;if(n instanceof Array){for(s=0,len=n.length;s<len;s++)i.push(o.addPropertyListener(e,t,n[s],r));return i}if(t instanceof Array){for(s=0,len=t.length;s<len;s++)i.push(o.addPropertyListener(e,t[s],n,r));return i}return f(e,t),new o.PropertyEventListener(e,t,n,r)},o.trigger=function(e,t){var n=l(e,t),r=Array.prototype.slice.call(arguments,2),i,s;typeof e["on"+t]=="function"&&e["on"+t].apply(e,r);for(i in n)n.hasOwnProperty(i)&&(s=n[i],s&&s.handler.apply(null,r))},o.triggerProperty=function(e,t,n){var r=c(e,t,n),i=Array.prototype.slice.call(arguments,3),s,o;for(s in r)r.hasOwnProperty(s)&&(o=r[s],o&&o.handler.apply(null,i))},o.removeListener=function(e){e instanceof o.PropertyEventListener?delete c(e.source,e.property,e.eventName)[e.eventID]:delete l(e.source,e.eventName)[e.eventID]},o.clearListeners=function(e,t){var n=l(e,t),r;for(r in n)if(n.hasOwnProperty(r)){var i=n[r];i&&o.removeListener(i)}},o.clearInstanceListeners=function(e){var t=l(e),n;for(var r in t)if(t.hasOwnProperty(r)){var i=t[r];for(n in i)if(i.hasOwnProperty(n)){var s=i[n];s&&o.removeListener(s)}}},r.exports=o},mimetype:"application/javascript",remote:!1},t.resources["/__builtin__/index.js"]={data:function(e,n,r,i,s,o){"use strict";var u={copy:function(e){if(e===null)return null;var t;if(e instanceof Array){t=[];for(var n=0,r=e.length;n<r;n++)t[n]=u.copy(e[n])}else if(typeof e=="object")if(typeof e.copy=="function")t=e.copy();else{t={};var i,s;for(s in e)t[s]=u.copy(e[s])}else t=e;return t},each:function(e,t){var n=0,r=e.length;for(n=0;n<r;n++)t(e[n],n);return e},map:function(e,t){var n=0,r=e.length,i=[];for(n=0;n<r;n++)i.push(t(e[n],n));return i},domReady:function(){if(t.__blockReady)return;document.body||setTimeout(function(){u.domReady()},13),t.__isReady=!0;if(t.__readyList){var e,n=0;while(e=t.__readyList[n++])e.call(document);t.__readyList=null,delete t.__readyList}},bindReady:function(){if(t.__readyBound)return;t.__readyBound=!0,t.__triggerReady=function(){t.__blockReady=!1,u.domReady()};if(document.readyState==="complete")return u.domReady();document.addEventListener?window.addEventListener("load",u.domReady,!1):document.attachEvent&&window.attachEvent("onload",u.domReady)},ready:function(e){!t.__blockReady&&t.__isReady?e():(t.__readyList||(t.__readyList=[]),t.__readyList.push(e)),u.bindReady()}};i.exports=u},mimetype:"application/javascript",remote:!1},t.resources["/__builtin__/init.js"]={data:function(e,t,n,r,i,s){Object.keys||(Object.keys=function(e){if(e!==Object(e))throw new TypeError("Object.keys called on non-object");var t=[],n;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}),Object.create||(Object.create=function(e){function t(){}if(arguments.length>1)throw new Error("Object.create implementation only accepts the first parameter.");return t.prototype=e,new t}),Function.prototype.bind||(Function.prototype.bind=function(e){if(typeof this!="function")throw new TypeError("Function.prototype.bind - what is trying to be fBound is not callable");var t=Array.prototype.slice.call(arguments,1),n=this,r=function(){},i=function(){return n.apply(this instanceof r?this:e||window,t.concat(Array.prototype.slice.call(arguments)))};return r.prototype=this.prototype,i.prototype=new r,i}),window.requestAnimationFrame||(window.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout(e,1e3/60)}}())},mimetype:"application/javascript",remote:!1},t.resources["/__builtin__/path.js"]={data:function(e,n,r,i,s,o){var u={dirname:function(e){var t=e.split("/");return t.pop(),t.join("/")},basename:function(e){var t=e.split("/");return t[t.length-1]},join:function(){return i.exports.normalize(Array.prototype.join.call(arguments,"/"))},exists:function(e){return t.resources[e]!==undefined},normalizeArray:function(e,t){var n=[],r;for(var i=0,s=e.length-1;i<=s;i++){var o=e[i];if(o===""&&i!==0&&i!==s&&!t)continue;if(o==="."&&r!==undefined)continue;if(n.length===1&&n[0]===""&&(o==="."||o===".."))continue;o===".."&&n.length&&r!==".."&&r!=="."&&r!==undefined&&(r!==""||t)?(n.pop(),r=n.slice(-1)[0]):(r==="."&&n.pop(),n.push(o),r=o)}return n},normalize:function(e,t){return i.exports.normalizeArray(e.split("/"),t).join("/")}};i.exports=u},mimetype:"application/javascript",remote:!1},t.resources["/__builtin__/preloader.js"]={data:function(e,n,r,i,s,o){"use strict";function f(e){this.count=0,this.loaded=0,this.queue=[];var n={};e&&this.addToQueue(e);var i=function(e){this.loaded++,n[e]&&u.removeListener(n[e]),u.trigger(this,"load",this,e),this.loaded>=this.count&&u.trigger(this,"complete",this)}.bind(this);this.load=function(){if(this.queue.length==0){u.trigger(this,"complete",this);return}this.count+=this.queue.length;var e,s;for(s=0;s<this.count;s++){e=this.queue[s];if(!t.resources[e]){console.warn("Unable to preload non-existant file: ",e),i(e);continue}if(!t.resources[e].remote||t.resources[e].loaded){i(e);continue}var o=r(e),f=i.bind(this,e);o instanceof a.RemoteResource?(n[e]=u.addListener(o,"load",f),o.load()):setTimeout(f,1)}this.clearQueue()}}var u=n("events"),a=n("remote_resources");f.prototype.addToQueue=function(e){if(e instanceof Array)for(var t=0;t<e.length;t++)this.queue.push(e[t]);else this.queue.push(e)},f.prototype.addEverythingToQueue=function(){var e=[],n,r;for(n in t.resources)t.resources.hasOwnProperty(n)&&(r=t.resources[n],r.remote&&e.push(n));e.length>0&&this.addToQueue(e)},f.prototype.clearQueue=function(){this.queue.splice(0,this.queue.length)},e.Preloader=f},mimetype:"application/javascript",remote:!1},t.resources["/__builtin__/remote_resources.js"]={data:function(e,n,r,i,s,o){"use strict";function l(e,t){this.url=e,this.path=t}function c(e,t){l.apply(this,arguments)}function h(e,t){l.apply(this,arguments)}var u=n("./index"),a=n("events"),f={};f.RemoteResource=l,f.RemoteResource.prototype.load=function(){var e=new XMLHttpRequest;e.onreadystatechange=function(){e.readyState==4&&(t.resources[this.path].data=e.responseText,t.resources[this.path].loaded=!0,a.trigger(this,"load",this))}.bind(this),e.open("GET",this.url,!0),e.send(null)},f.RemoteImage=c,f.RemoteImage.prototype=Object.create(l.prototype),f.RemoteImage.prototype.load=function(){var e=new Image;return t.resources[this.path].data=e,e.onload=function(){t.resources[this.path].loaded=!0,a.trigger(this,"load",this)}.bind(this),e.onerror=function(){console.warn("Failed to load resource: [%s] from [%s]",this.path,e.src),t.resources[this.path].loaded=!0,a.trigger(this,"load",this)}.bind(this),e.src=this.url,e},f.RemoteScript=h,f.RemoteScript.prototype=Object.create(l.prototype),f.RemoteScript.prototype.load=function(){var e=document.createElement("script");return t.resources[this.path].data=e,e.onload=function(){t.resources[this.path].loaded=!0,a.trigger(this,"load",this)}.bind(this),e.src=this.url,document.getElementsByTagName("head")[0].appendChild(e),e},f.getRemoteResourceConstructor=function(e){e=e.split("/");var t;return e[0]=="image"?t=c:e[1]=="javascript"?t=h:t=l,t},f.getRemoteResource=function(e){var n=t.resources[e];if(!n)return null;if(n.remoteResource)return n.remoteResource;var r=f.getRemoteResourceConstructor(n.mimetype);return n.remoteResource=new r(n.data,e),n.remoteResource},i.exports=f},mimetype:"application/javascript",remote:!1},t.resources["/__builtin__/system.js"]={data:function(e,t,n,r,i,s){var o={stdio:{print:function(){console&&console.log.apply(console,arguments)}}};window.console?o.console=window.console:o.console={log:function(){}}},mimetype:"application/javascript",remote:!1},function(){"use strict";function s(e,t){return f(e,t).exports}function o(e){var n=s("remote_resources"),r=t.resources[e];if(!r)throw new Error("Unable to find resource: "+e);return r.remote&&!r.loaded?n.getRemoteResource(e):r.data}function u(e,t){var n=e.substring(0,2);if(n!=="./"&&n!=="..")return r;var s=i.basename(t.filename).match(/^index\.js$/),o=s?t.id:i.dirname(t.id);return[i.dirname(t.filename)]}function a(e,t){e.charAt(0)==="/"&&(t=[""]);for(var n=0;n<t.length;n++){var r=t[n],s=i.join(r,e);if(i.exists(i.join(s,"index.js")))return i.join(s,"index.js");if(i.exists(s+".js"))return s+".js"}return!1}function f(t,r){r=r||n.mainModule;var i=u(t,r),s=a(t,i);if(s===!1)throw new Error("Unable to find module: "+t);if(r){var o=l._moduleCache[s];if(o)return o}var f=new l(s,r);return t==e&&!n.mainModule&&(n.mainModule=f),f._initialize(s),f}function l(e,t){this.id=e,this.parent=t,this.children=[],this.exports={},t&&t.children.push(this),l._moduleCache=l._moduleCache||{},l._moduleCache[this.id]=this,this.filename=null,this.dirname=null}var e="/main",n={},r=["/__builtin__","/__builtin__/libs","/libs"],i;l.prototype._initialize=function(e){function u(e){return f(e,s).exports}var s=this;this.filename=e,i?this.dirname=i.dirname(e):this.dirname="",u.paths=r,u.main=n.mainModule;var a=t.resources[this.filename];if(!a)throw new Error("Unable to find module: "+this.filename);return a.data.apply(this.exports,[this.exports,u,o,this,this.filename,this.dirname]),this},i=(new l("path"))._initialize("/__builtin__/path.js").exports;var c=f("/__builtin__/").exports;c.ready(function(){var r,i;for(r in t.resources)t.resources.hasOwnProperty(r)&&(/^\/libs\/[^\/]+?\/init.js$/.test(r)||r=="/__builtin__/init.js")&&(i=f(r.replace(/\.js$/,"")).exports,typeof i.main=="function"&&i.main());n.mainModule=f(e),n.mainModule.exports.main&&n.mainModule.exports.main()})}()})(),function(){t.resources["/libs/cocos2d/ActionManager.js"]={data:function(e,t,n,r,i,s){"use strict";function f(){f.superclass.constructor.call(this),a.sharedScheduler.scheduleUpdate({target:this,priority:0,paused:!1}),this.targets=[]}var o=t("util"),u=t("./Scheduler").Timer,a=t("./Scheduler").Scheduler;f.inherit(Object,{targets:null,currentTarget:null,currentTargetSalvaged:null,addAction:function(e){var t=e.target.id,n=this.targets[t];n||(n=this.targets[t]={paused:!1,target:e.target,actions:[]}),n.actions.push(e.action),e.action.startWithTarget(e.target)},removeAction:function(e){var t=e.originalTarget.id,n=this.targets[t];if(!n)return;var r=n.actions.indexOf(e);if(r==-1)return;this.currentTarget==n&&(n.currentActionSalvaged=!0),n.actions[r]=null,n.actions.splice(r,1),n.actions.length===0&&this.currentTarget==n&&(this.currentTargetSalvaged=!0)},getActionFromTarget:function(e){var t=e.tag,n=e.target.id,r=this.targets[n];if(!r)return null;for(var i=0;i<r.actions.length;i++)if(r.actions[i]&&r.actions[i].tag===t)return r.actions[i];return null},removeAllActionsFromTarget:function(e){var t=e.id,n=this.targets[t];if(!n)return;delete this.targets[t],n.actions.splice(0,n.actions.length)},update:function(e){var t=this;o.each(this.targets,function(n,r){if(!n)return;t.currentTarget=n,n.paused||o.each(n.actions,function(r,i){if(!r)return;n.currentAction=r,n.currentActionSalvaged=!1,n.currentAction.step(e);if(n.currentAction.isDone){n.currentAction.stop();var s=n.currentAction;n.currentAction=null,t.removeAction(s)}n.currentAction=null}),t.currentTargetSalvaged&&n.actions.length===0&&(t.targets[r]=null,delete t.targets[r])})},pauseTarget:function(e){},resumeTarget:function(e){}}),Object.defineProperty(f,"sharedManager",{get:function(){return f._instance||(f._instance=new this),f._instance},enumerable:!0}),e.ActionManager=f},mimetype:"application/javascript",remote:!1},t.resources["/libs/cocos2d/actions/Action.js"]={data:function(e,t,n,r,i,s){"use strict";function f(){}function l(e){l.superclass.constructor.call(this),this.other=e}function c(){c.superclass.constructor.call(this)}function h(e){h.superclass.constructor.call(this,e),this.other=e.action,this.speed=e.speed}function p(e){p.superclass.constructor.call(this,e),this.followedNode=e.target;var n=t("../Director").Director.sharedDirector.winSize;this.fullScreenSize=u.ccp(n.width,n.height),this.halfScreenSize=u.ccpMult(this.fullScreenSize,u.ccp(.5,.5)),e.worldBoundary!==undefined&&(this.boundarySet=!0,this.leftBoundary=-(e.worldBoundary.origin.x+e.worldBoundary.size.width-this.fullScreenSize.x),this.rightBoundary=-e.worldBoundary.origin.x,this.topBoundary=-e.worldBoundary.origin.y,this.bottomBoundary=-(e.worldBoundary.origin.y+e.worldBoundary.size.height-this.fullScreenSize.y),this.rightBoundary<this.leftBoundary&&(this.rightBoundary=this.leftBoundary=(this.leftBoundary+this.rightBoundary)/2),this.topBoundary<this.bottomBoundary&&(this.topBoundary=this.bottomBoundary=(this.topBoundary+this.bottomBoundary)/2),this.topBoundary==this.bottomBoundary&&this.leftBoundary==this.rightBoundary&&(this.boundaryFullyCovered=!0))}var o=t("util"),u=t("geometry"),a=u.ccp;f.inherit(Object,{target:null,originalTarget:null,tag:null,step:function(e){console.warn("Action.step() Override me")},update:function(e){console.warn("Action.update() Override me")},startWithTarget:function(e){this.target=this.originalTarget=e},stop:function(){this.target=null},get isDone(){return!0},reverse:function(){}}),l.inherit(f,{other:null,startWithTarget:function(e){l.superclass.startWithTarget.call(this,e),this.other.startWithTarget(this.target)},step:function(e){this.other.step(e);if(this.other.isDone){var t=e-this.other.duration-this.other.elapsed;this.other.startWithTarget(this.target),this.other.step(t)}},get isDone(){return!1},reverse:function(){return new l(this.other.reverse())},copy:function(){return new l(this.other.copy())}}),c.inherit(f,{duration:2,reverse:function(){console.log("FiniteTimeAction.reverse() Override me")}}),h.inherit(f,{other:null,speed:1,startWithTarget:function(e){h.superclass.startWithTarget.call(this,e),this.other.startWithTarget(this.target)},stop:function(){this.other.stop(),h.superclass.stop.call(this)},step:function(e){this.other.step(e*this.speed)},get isDone(){return this.other.isDone},copy:function(){return new h({action:this.other.copy(),speed:this.speed})},reverse:function(){return new h({action:this.other.reverse(),speed:this.speed})}}),p.inherit(f,{followedNode:null,boundarySet:!1,boundaryFullyCovered:!1,halfScreenSize:null,fullScreenSize:null,leftBoundary:0,rightBoundary:0,topBoundary:0,bottomBoundary:0,step:function(e){if(this.boundarySet){if(this.boundaryFullyCovered)return;var t=u.ccpSub(this.halfScreenSize,this.followedNode.position);this.target.position=a(Math.min(Math.max(t.x,this.leftBoundary),this.rightBoundary),Math.min(Math.max(t.y,this.bottomBoundary),this.topBoundary))}else this.target.position=u.ccpSub(this.halfScreenSize,this.followedNode.position)},get isDone(){return!this.followedNode.isRunning}}),e.Action=f,e.RepeatForever=l,e.FiniteTimeAction=c,e.Speed=h,e.Follow=p},mimetype:"application/javascript",remote:!1},t.resources["/libs/cocos2d/actions/ActionEase.js"]={data:function(e,t,n,r,i,s){"use strict";function l(e){if(!e.action)throw"Ease: action argument must be non-nil";l.superclass.constructor.call(this,{duration:e.action.duration}),this.other=e.action}function c(e){c.superclass.constructor.call(this,e),this.rate=e.rate}function h(e){h.superclass.constructor.call(this,e)}function p(e){p.superclass.constructor.call(this,e)}function d(e){d.superclass.constructor.call(this,e)}function v(e){v.superclass.constructor.call(this,e)}function m(e){m.superclass.constructor.call(this,e)}function g(e){g.superclass.constructor.call(this,e)}function y(e){y.superclass.constructor.call(this,e)}function b(e){b.superclass.constructor.call(this,e)}function w(e){w.superclass.constructor.call(this,e)}function E(e){E.superclass.constructor.call(this,{action:e.action}),e.period!==undefined&&(this.period=e.period)}function S(e){S.superclass.constructor.call(this,e)}function x(e){x.superclass.constructor.call(this,e)}function T(e){T.superclass.constructor.call(this,e)}function N(e){N.superclass.constructor.call(this,e)}function C(e){C.superclass.constructor.call(this,e)}function k(e){k.superclass.constructor.call(this,e)}function L(e){L.superclass.constructor.call(this,e)}function A(e){A.superclass.constructor.call(this,e)}function O(e){O.superclass.constructor.call(this,e)}function M(e){M.superclass.constructor.call(this,e)}var o=t("util"),u=t("./ActionInterval").ActionInterval,a=t("geometry"),f=a.ccp;l.inherit(u,{other:null,startWithTarget:function(e){l.superclass.startWithTarget.call(this,e),this.other.startWithTarget(this.target)},stop:function(){this.other.stop(),l.superclass.stop.call(this)},copy:function(){return new l({action:this.other.copy()})},reverse:function(){return new l({action:this.other.reverse()})}}),c.inherit(l,{rate:0,copy:function(){return new c({action:this.other.copy(),rate:this.rate})},reverse:function(){return new c({action:this.other.reverse(),rate:1/this.rate})}}),h.inherit(c,{update:function(e){this.other.update(Math.pow(e,this.rate))},copy:function(){return new h({action:this.other.copy(),rate:this.rate})},reverse:function(){return new h({action:this.other.reverse(),rate:1/this.rate})}}),p.inherit(c,{update:function(e){this.other.update(Math.pow(e,1/this.rate))},copy:function(){return new p({action:this.other.copy(),rate:this.rate})},reverse:function(){return new p({action:this.other.reverse(),rate:1/this.rate})}}),d.inherit(c,{update:function(e){var t=1,n=Math.floor(this.rate);n%2==0&&(t=-1),e*=2,e<1?this.other.update(.5*Math.pow(e,this.rate)):this.other.update(t*.5*(Math.pow(e-2,this.rate)+t*2))},copy:function(){return new d({action:this.other.copy(),rate:this.rate})},reverse:function(){return new d({action:this.other.reverse(),rate:this.rate})}}),v.inherit(l,{update:function(e){this.other.update(e==0?0:Math.pow(2,10*(e/1-1))-.001)},copy:function(){return new v({action:this.other.copy()})},reverse:function(){return new e.EaseExponentialOut({action:this.other.reverse()})}}),m.inherit(l,{update:function(e){this.other.update(e==1?1:-Math.pow(2,-10*e/1)+1)},copy:function(){return new m({action:this.other.copy()})},reverse:function(){return new e.EaseExponentialIn({action:this.other.reverse()})}}),g.inherit(l,{update:function(e){e/=.5,e<1?e=.5*Math.pow(2,10*(e-1)):e=.5*(-Math.pow(2,-10*(e-1))+2),this.other.update(e)},copy:function(){return new g({action:this.other.copy()})},reverse:function(){return new g({action:this.other.reverse()})}}),y.inherit(l,{update:function(e){this.other.update(-1*Math.cos(e*Math.PI_2)+1)},copy:function(){return new y({action:this.other.copy()})},reverse:function(){return new e.EaseSineOut({action:this.other.reverse()})}}),b.inherit(l,{update:function(e){this.other.update(Math.sin(e*Math.PI_2))},copy:function(){return new b({action:this.other.copy()})},reverse:function(){return new e.EaseSineIn({action:this.other.reverse()})}}),w.inherit(l,{update:function(e){this.other.update(-0.5*(Math.cos(e*Math.PI)-1))},copy:function(){return new w({action:this.other.copy()})},reverse:function(){return new w({action:this.other.reverse()})}}),E.inherit(l,{period:.3,copy:function(){return new E({action:this.other.copy(),period:this.period})},reverse:function(){return window.console.warn("EaseElastic reverse(): Override me"),null}}),S.inherit(E,{update:function(e){var t=0;if(e==0||e==1)t=e;else{var n=this.period/4;e-=1,t=-Math.pow(2,10*e)*Math.sin((e-n)*Math.PI*2/this.period)}this.other.update(t)},copy:function(){return new S({action:this.other.copy(),period:this.period})},reverse:function(){return new e.EaseElasticOut({action:this.other.reverse(),period:this.period})}}),x.inherit(E,{update:function(e){var t=0;if(e==0||e==1)t=e;else{var n=this.period/4;t=Math.pow(2,-10*e)*Math.sin((e-n)*Math.PI*2/this.period)+1}this.other.update(t)},copy:function(){return new x({action:this.other.copy(),period:this.period})},reverse:function(){return new e.EaseElasticIn({action:this.other.reverse(),period:this.period})}}),T.inherit(E,{update:function(e){var t=0;if(e==0||e==1)t=e;else{e*=2,this.period==0&&(this.period=.3*1.5);var n=this.period/4;e-=1,e<0?t=-0.5*Math.pow(2,10*e)*Math.sin((e-n)*Math.PI*2/this.period):t=Math.pow(2,-10*e)*Math.sin((e-n)*Math.PI*2/this.period)*.5+1}this.other.update(t)},copy:function(){return new T({action:this.other.copy(),period:this.period})},reverse:function(){return new T({action:this.other.reverse(),period:this.period})}}),N.inherit(l,{bounceTime:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?(e-=1.5/2.75,7.5625*e*e+.75):e<2.5/2.75?(e-=2.25/2.75,7.5625*e*e+.9375):(e-=2.625/2.75,7.5625*e*e+.984375)}}),C.inherit(N,{update:function(e){var t=1-this.bounceTime(1-e);this.other.update(t)},copy:function(){return new C({action:this.other.copy()})},reverse:function(){return new e.EaseBounceOut({action:this.other.reverse()})}}),k.inherit(N,{update:function(e){var t=this.bounceTime(e);this.other.update(t)},copy:function(){return new k({action:this.other.copy()})},reverse:function(){return new e.EaseBounceIn({action:this.other.reverse()})}}),L.inherit(N,{update:function(e){var t=0;e<.5?(e*=2,t=(1-this.bounceTime(1-e))*.5):t=this.bounceTime(e*2-1)*.5+.5,this.other.update(t)},copy:function(){return new L({action:this.other.copy()})},reverse:function(){return new L({action:this.other.reverse()})}}),A.inherit(l,{update:function(e){var t=1.70158;this.other.update(e*e*((t+1)*e-t))},copy:function(){return new A({action:this.other.copy()})},reverse:function(){return new e.EaseBackOut({action:this.other.reverse()})}}),O.inherit(l,{update:function(e){var t=1.70158;e-=1,this.other.update(e*e*((t+1)*e+t)+1)},copy:function(){return new O({action:this.other.copy()})},reverse:function(){return new e.EaseBackIn({action:this.other.reverse()})}}),M.inherit(l,{update:function(e){var t=2.5949095;e*=2,e<1?this.other.update(e*e*((t+1)*e-t)/2):(e-=2,this.other.update(e*e*((t+1)*e+t)/2+1))},copy:function(){return new M({action:this.other.copy()})},reverse:function(){return new M({action:this.other.reverse()})}}),e.ActionEase=l,e.EaseRate=c,e.EaseIn=h,e.EaseOut=p,e.EaseInOut=d,e.EaseExponentialIn=v,e.EaseExponentialOut=m,e.EaseExponentialInOut=g,e.EaseSineIn=y,e.EaseSineOut=b,e.EaseSineInOut=w,e.EaseElastic=E,e.EaseElasticIn=S,e.EaseElasticOut=x,e.EaseElasticInOut=T,e.EaseBounce=N,e.EaseBounceIn=C,e.EaseBounceOut=k,e.EaseBounceInOut=L,e.EaseBackIn=A,e.EaseBackOut=O,e.EaseBackInOut=M},mimetype:"application/javascript",remote:!1},t.resources["/libs/cocos2d/actions/ActionInstant.js"]={data:function(e,t,n,r,i,s){"use strict";function f(e){f.superclass.constructor.call(this,e),this.duration=0}function l(e){l.superclass.constructor.call(this,e)}function c(e){c.superclass.constructor.call(this,e)}function h(e){h.superclass.constructor.call(this,e)}function p(e){p.superclass.constructor.call(this,e),this.flipX=e.flipX}function d(e){d.superclass.constructor.call(this,e),this.flipY=e.flipY}function v(e){v.superclass.constructor.call(this,e),this.position=o.copy(e.position)}function m(e){m.superclass.constructor.call(this,e),this.target=e.target,this.method=typeof e.method=="function"?e.method:this.target[e.method],this.callback=this.method.bind(this.target)}var o=t("util"),u=t("./Action"),a=t("geometry").ccp;f.inherit(u.FiniteTimeAction,{get isDone(){return!0},step:function(e){this.update(1)},update:function(e){},copy:function(){return this},reverse:function(){return this.copy()}}),l.inherit(f,{startWithTarget:function(e){l.superclass.startWithTarget.call(this,e),this.target.visible=!0},copy:function(){return new l},reverse:function(){return new e.Hide}}),c.inherit(f,{startWithTarget:function(e){c.superclass.startWithTarget.call(this,e),this.target.visible=!1},copy:function(){return new c},reverse:function(){return new e.Show}}),h.inherit(f,{startWithTarget:function(e){h.superclass.startWithTarget.call(this,e);var t=this.target.visible;this.target.visible=!t},copy:function(){return new h}}),p.inherit(f,{flipX:!1,startWithTarget:function(e){p.superclass.startWithTarget.call(this,e),e.flipX=this.flipX},reverse:function(){return new p({flipX:!this.flipX})},copy:function(){return new p({flipX:this.flipX})}}),d.inherit(f,{flipY:!1,startWithTarget:function(e){d.superclass.startWithTarget.call(this,e),e.flipY=this.flipY},reverse:function(){return new d({flipY:!this.flipY})},copy:function(){return new d({flipY:this.flipY})}}),v.inherit(f,{position:null,startWithTarget:function(e){v.superclass.startWithTarget.call(this,e),this.target.position=this.position},copy:function(){return new v({position:this.position})}}),m.inherit(f,{callback:null,target:null,method:null,startWithTarget:function(e){m.superclass.startWithTarget.call(this,e),this.execute(e)},execute:function(e){this.callback.call(this,e)},copy:function(){return new m({target:this.target,method:this.method})}}),e.ActionInstant=f,e.Show=l,e.Hide=c,e.ToggleVisibility=h,e.FlipX=p,e.FlipY=d,e.Place=v,e.CallFunc=m},mimetype:"application/javascript",remote:!1},t.resources["/libs/cocos2d/actions/ActionInterval.js"]={data:function(e,t,n,r,i,s){"use strict";function l(e,t){var n=t[0].copy(),r,i;for(i=1;i<t.length;i++){r=t[i].copy();if(!r)break;n=new e({one:n,two:r})}return n}function c(e,t,n,r,i){return Math.pow(1-i,3)*e+3*i*Math.pow(1-i,2)*t+3*Math.pow(i,2)*(1-i)*n+Math.pow(i,3)*r}function h(e){h.superclass.constructor.apply(this,arguments);var t=e.duration||0;t===0&&(t=1e-7),this.duration=t,this.elapsed=0,this._firstTick=!0}function p(){p.superclass.constructor.apply(this,arguments)}function d(e){d.superclass.constructor.call(this,e),e.scale!==undefined?this.endScaleX=this.endScaleY=e.scale:(this.endScaleX=e.scaleX,this.endScaleY=e.scaleY)}function v(e){v.superclass.constructor.call(this,e)}function m(e){m.superclass.constructor.call(this,e),this.dstAngle=e.angle}function g(e){g.superclass.constructor.call(this,e),this.angle=e.angle}function y(e){y.superclass.constructor.call(this,e),this.endPosition=o.copy(e.position)}function b(e){b.superclass.constructor.call(this,e),this.delta=o.copy(e.position)}function w(e){w.superclass.constructor.call(this,e),this.delta=o.copy(e.delta),this.height=e.height,this.jumps=e.jumps}function E(e){E.superclass.constructor.call(this,e)}function S(e){S.superclass.constructor.call(this,e),this.config=o.copy(e.bezier)}function x(e){x.superclass.constructor.call(this,e)}function T(e){T.superclass.constructor.call(this,e),this.times=e.blinks}function N(e){N.superclass.constructor.call(this,e)}function C(e){C.superclass.constructor.call(this,e)}function k(e){k.superclass.constructor.call(this,e),this.toOpacity=e.toOpacity}function L(e){if(e.actions)return l(Object.getPrototypeOf(this).constructor,e.actions);if(!e.one)throw"Sequence argument one must be non-nil";if(!e.two)throw"Sequence argument two must be non-nil";this.actions=[];var t=e.one.duration+e.two.duration;L.superclass.constructor.call(this,{duration:t}),this.actions[0]=e.one,this.actions[1]=e.two}function A(e){var t=e.action.duration*e.times;A.superclass.constructor.call(this,{duration:t}),this.times=e.times,this.other=e.action.copy(),this.total=0}function O(e){if(e.actions)return l(Object.getPrototypeOf(this).constructor,e.actions);var t=e.one,n=e.two;if(!t||!n)throw"cocos.actions.Spawn: required actions missing";var r=t.duration,i=n.duration;O.superclass.constructor.call(this,{duration:Math.max(r,i)}),this.one=t,this.two=n,r>i?this.set("two",new L({actions:[n,new p({duration:r-i})]})):r<i&&this.set("one",new L({actions:[t,new p({duration:i-r})]}))}function M(e){this.animation=e.animation,this.restoreOriginalFrame=e.restoreOriginalFrame!==!1,e.duration=this.animation.frames.length*this.animation.delay,M.superclass.constructor.call(this,e)}var o=t("util"),u=t("./Action"),a=t("geometry"),f=a.ccp;h.inherit(u.FiniteTimeAction,{elapsed:0,_firstTick:!0,get isDone(){return this.elapsed>=this.duration},step:function(e){this._firstTick?(this._firstTick=!1,this.elapsed=0):this.elapsed+=e,this.update(Math.min(1,this.elapsed/this.duration))},startWithTarget:function(e){h.superclass.startWithTarget.call(this,e),this.elapsed=0,this._firstTick=!0},copy:function(){throw"copy() not implemented"},reverse:function(){throw"Reverse Action not implemented"}}),p.inherit(h,{update:function(e){e===1&&this.stop()},copy:function(){return new p({duration:this.duration})},reverse:function(){return new p({duration:this.duration})}}),d.inherit(h,{scaleX:1,scaleY
:1,startScaleX:1,startScaleY:1,endScaleX:1,endScaleY:1,deltaX:0,deltaY:0,startWithTarget:function(e){d.superclass.startWithTarget.call(this,e),this.startScaleX=this.target.scaleX,this.startScaleY=this.target.scaleY,this.deltaX=this.endScaleX-this.startScaleX,this.deltaY=this.endScaleY-this.startScaleY},update:function(e){if(!this.target)return;this.target.scaleX=this.startScaleX+this.deltaX*e,this.target.scaleY=this.startScaleY+this.deltaY*e},copy:function(){return new d({duration:this.duration,scaleX:this.endScaleX,scaleY:this.endScaleY})}}),v.inherit(d,{startWithTarget:function(e){v.superclass.startWithTarget.call(this,e),this.deltaX=this.startScaleX*this.endScaleX-this.startScaleX,this.deltaY=this.startScaleY*this.endScaleY-this.startScaleY},copy:function(){return new v({duration:this.duration,scaleX:this.endScaleX,scaleY:this.endScaleY})},reverse:function(){return new v({duration:this.duration,scaleX:1/this.endScaleX,scaleY:1/this.endScaleY})}}),m.inherit(h,{dstAngle:0,startAngle:0,diffAngle:0,startWithTarget:function(e){m.superclass.startWithTarget.call(this,e),this.startAngle=e.rotation,this.startAngle>0?this.startAngle=this.startAngle%360:this.startAngle=this.startAngle%-360,this.diffAngle=this.dstAngle-this.startAngle,this.diffAngle>180?this.diffAngle-=360:this.diffAngle<-180&&(this.diffAngle+=360)},update:function(e){this.target.rotation=this.startAngle+this.diffAngle*e},copy:function(){return new m({duration:this.duration,angle:this.dstAngle})}}),g.inherit(m,{angle:0,startWithTarget:function(e){g.superclass.startWithTarget.call(this,e),this.startAngle=this.target.rotation},update:function(e){this.target.rotation=this.startAngle+this.angle*e},copy:function(){return new g({duration:this.duration,angle:this.angle})},reverse:function(){return new g({duration:this.duration,angle:-this.angle})}}),y.inherit(h,{delta:null,startPosition:null,endPosition:null,startWithTarget:function(e){y.superclass.startWithTarget.call(this,e),this.startPosition=o.copy(e.position),this.delta=a.ccpSub(this.endPosition,this.startPosition)},update:function(e){var t=this.startPosition,n=this.delta;this.target.position=f(t.x+n.x*e,t.y+n.y*e)},copy:function(){return new y({duration:this.duration,position:this.endPosition})}}),b.inherit(y,{startWithTarget:function(e){var t=this.delta;b.superclass.startWithTarget.call(this,e),this.delta=t},copy:function(){return new b({duration:this.duration,position:this.delta})},reverse:function(){var e=this.delta;return new b({duration:this.duration,position:a.ccp(-e.x,-e.y)})}}),w.inherit(h,{delta:null,height:0,jumps:0,startPosition:null,copy:function(){return new w({duration:this.duration,delta:this.delta,height:this.height,jumps:this.jumps})},startWithTarget:function(e){w.superclass.startWithTarget.call(this,e),this.startPosition=e.position},update:function(e){var t=e*this.jumps%1,n=this.height*4*t*(1-t);n+=this.delta.y*e;var r=this.delta.x*e;this.target.position=a.ccp(this.startPosition.x+r,this.startPosition.y+n)},reverse:function(){return new w({duration:this.duration,delta:a.ccp(-this.delta.x,-this.delta.y),height:this.height,jumps:this.jumps})}}),E.inherit(w,{startWithTarget:function(e){E.superclass.startWithTarget.call(this,e),this.delta=a.ccp(this.delta.x-this.startPosition.x,this.delta.y-this.startPosition.y)}}),S.inherit(h,{config:null,startPosition:null,startWithTarget:function(e){S.superclass.startWithTarget.call(this,e),this.startPosition=this.target.position},update:function(e){var t=this.config,n=0,r=t.controlPoint1.x,i=t.controlPoint2.x,s=t.endPosition.x,o=0,u=t.controlPoint1.y,f=t.controlPoint2.y,l=t.endPosition.y,h=c(n,r,i,s,e),p=c(o,u,f,l,e);this.target.position=a.ccpAdd(this.startPosition,a.ccp(h,p))},copy:function(){return new S({bezier:this.config,duration:this.duration})},reverse:function(){var e=this.config,t=new a.BezierConfig;return t.endPosition=a.ccpNeg(e.endPosition),t.controlPoint1=a.ccpAdd(e.controlPoint2,a.ccpNeg(e.endPosition)),t.controlPoint2=a.ccpAdd(e.controlPoint1,a.ccpNeg(e.endPosition)),new S({bezier:t,duration:this.duration})}}),x.inherit(S,{startWithTarget:function(e){x.superclass.startWithTarget.call(this,e);var t=this.config;t.controlPoint1=a.ccpSub(t.controlPoint1,this.startPosition),t.controlPoint2=a.ccpSub(t.controlPoint2,this.startPosition),t.endPosition=a.ccpSub(t.endPosition,this.startPosition)}}),T.inherit(h,{times:1,update:function(e){if(!this.isDone){var t=1/this.times,n=e%t;this.target.visible=n>t/2}},copy:function(){return new T({duration:this.duration,blinks:this.times})},reverse:function(){return this.copy()}}),N.inherit(h,{update:function(e){var t=this.target;if(!t)return;t.opacity=255-255*e},copy:function(){return new N({duration:this.duration})},reverse:function(){return new e.FadeIn({duration:this.duration})}}),C.inherit(h,{update:function(e){var t=this.target;if(!t)return;t.opacity=e*255},copy:function(){return new C({duration:this.duration})},reverse:function(){return new e.FadeOut({duration:this.duration})}}),k.inherit(h,{toOpacity:null,fromOpacity:null,startWithTarget:function(e){k.superclass.startWithTarget.call(this,e),this.fromOpacity=this.target.opacity},update:function(e){var t=this.target;if(!t)return;t.opacity=this.fromOpacity+(this.toOpacity-this.fromOpacity)*e},copy:function(){return new k({duration:this.duration,toOpacity:this.toOpacity})}}),L.inherit(h,{actions:null,split:0,last:0,startWithTarget:function(e){L.superclass.startWithTarget.call(this,e),this.split=this.actions[0].duration/this.duration,this.last=-1},stop:function(){this.actions[0].stop(),this.actions[1].stop(),L.superclass.stop.call(this)},update:function(e){var t=0,n=0;e>=this.split?(t=1,this.split==1?n=1:n=(e-this.split)/(1-this.split)):(t=0,this.split!=0?n=e/this.split:n=1),this.last==-1&&t==1&&(this.actions[0].startWithTarget(this.target),this.actions[0].update(1),this.actions[0].stop()),this.last!=t&&(this.last!=-1&&(this.actions[this.last].update(1),this.actions[this.last].stop()),this.actions[t].startWithTarget(this.target)),this.actions[t].update(n),this.last=t},copy:function(){return new L({actions:this.actions})},reverse:function(){return new L({actions:[this.actions[1].reverse(),this.actions[0].reverse()]})}}),A.inherit(h,{times:1,total:0,other:null,startWithTarget:function(e){this.total=0,A.superclass.startWithTarget.call(this,e),this.other.startWithTarget(e)},stop:function(){this.other.stop(),A.superclass.stop.call(this)},update:function(e){var t=e*this.times;if(t>this.total+1)this.other.update(1),this.total+=1,this.other.stop(),this.other.startWithTarget(this.target),this.total==this.times?this.other.update(0):this.other.update(t-this.total);else{var n=t%1;e==1&&(n=1,this.total+=1),this.other.update(Math.min(n,1))}},get isDone(){return this.total==this.times},copy:function(){return new A({action:this.other,times:this.times})},reverse:function(){return new A({action:this.other.reverse(),times:this.times})}}),O.inherit(h,{one:null,two:null,startWithTarget:function(e){O.superclass.startWithTarget.call(this,e),this.one.startWithTarget(this.target),this.two.startWithTarget(this.target)},stop:function(){this.one.stop(),this.two.stop(),O.superclass.stop.call(this)},step:function(e){this._firstTick?(this._firstTick=!1,this.elapsed=0):this.elapsed+=e,this.one.step(e),this.two.step(e)},update:function(e){this.one.update(e),this.two.update(e)},copy:function(){return new O({one:this.one.copy(),two:this.two.copy()})},reverse:function(){return new O({one:this.one.reverse(),two:this.two.reverse()})}}),M.inherit(h,{animation:null,restoreOriginalFrame:!0,origFrame:null,startWithTarget:function(e){M.superclass.startWithTarget.call(this,e),this.restoreOriginalFrame&&(this.origFrame=this.target.displayedFrame)},stop:function(){if(this.target&&this.restoreOriginalFrame){var e=this.target;e.displayFrame=this.origFrame}M.superclass.stop.call(this)},update:function(e){var t=this.animation.frames,n=t.length,r=Math.floor(e*n);r>=n&&(r=n-1);var i=this.target;i.isFrameDisplayed(t[r])||(i.displayFrame=t[r])},copy:function(){return new M({animation:this.animation,restoreOriginalFrame:this.restoreOriginalFrame})}}),e.ActionInterval=h,e.DelayTime=p,e.ScaleTo=d,e.ScaleBy=v,e.RotateTo=m,e.RotateBy=g,e.MoveTo=y,e.MoveBy=b,e.JumpBy=w,e.JumpTo=E,e.BezierBy=S,e.BezierTo=x,e.Blink=T,e.FadeIn=C,e.FadeOut=N,e.FadeTo=k,e.Spawn=O,e.Sequence=L,e.Repeat=A,e.Animate=M},mimetype:"application/javascript",remote:!1},t.resources["/libs/cocos2d/actions/index.js"]={data:function(e,t,n,r,i,s){"use strict";var o=t("util"),u=t("path"),a="Action ActionInterval ActionInstant ActionEase".split(" "),f={};o.each(a,function(e,n){o.extend(f,t("./"+e))}),r.exports=f},mimetype:"application/javascript",remote:!1},t.resources["/libs/cocos2d/Animation.js"]={data:function(e,t,n,r,i,s){"use strict";function u(e){u.superclass.constructor.call(this,e),this.frames=e.frames||[],this.delay=e.delay||0}var o=t("util");u.inherit(Object,{name:null,delay:0,frames:null}),e.Animation=u},mimetype:"application/javascript",remote:!1},t.resources["/libs/cocos2d/AnimationCache.js"]={data:function(e,t,n,r,i,s){"use strict";function a(){a.superclass.constructor.call(this),this.animations={}}var o=t("util"),u=t("Plist").Plist;a.inherit(Object,{animations:null,addAnimation:function(e){var t=e.name,n=e.animation;this.animations[t]=n},removeAnimation:function(e){var t=e.name;delete this.animations[t]},getAnimation:function(e){var t=e.name;return this.animations[t]}}),Object.defineProperty(a,"sharedAnimationCache",{get:function(){return a._instance||(a._instance=new this),a._instance},enumerable:!0}),e.AnimationCache=a},mimetype:"application/javascript",remote:!1},t.resources["/libs/cocos2d/config.js"]={data:function(e,t,n,r,i,s){r.exports={ENABLE_DEPRECATED_METHODS:!1,FLIP_Y_AXIS:!0,ENABLE_WEB_GL:!1,SHOW_REDRAW_REGIONS:!1}},mimetype:"application/javascript",remote:!1},t.resources["/libs/cocos2d/Director.js"]={data:function(t,n,r,i,s,o){"use strict";function d(){if(d._instance)throw new Error("Director instance already exists");this.sceneStack=[],this.window=parent.window,this.document=this.window.document,u.makeReadonly(this,"canvas context sceneStack winSize isReady document window container isTouchScreen isMobile".w)}function v(){v.superclass.constructor.call(this);var e=window.navigator.userAgent;e.match(/(iPhone|iPod)/)?this.viewportSize={portrait:new f.Size(320,416),landscape:new f.Size(480,268)}:e.match(/(iPad)/)&&(this.viewportSize={portrait:new f.Size(768,928),landscape:new f.Size(1024,672)})}function m(){m.superclass.constructor.call(this)}var u=n("util"),a=n("events"),f=n("geometry"),l=f.ccp,c=n("./EventDispatcher").EventDispatcher,h=n("./TouchDispatcher").TouchDispatcher,p=n("./Scheduler").Scheduler;d.inherit(Object,{backgroundColor:"rgb(0, 0, 0)",window:null,document:null,container:null,canvas:null,context:null,sceneStack:null,winSize:null,isPaused:!1,maxFrameRate:30,displayFPS:!1,preloadScene:null,isReady:!1,isTouchScreen:!1,isMobile:!1,dt:0,orientation:"unknown",_nextDeltaTimeZero:!1,_lastUpdate:0,_nextScene:null,_forcedOrientation:null,fullscreen:function(){throw new Error("Fullscreen is not implemented on non-mobile devices yet")},resize:function(t,n){if(!this.container)return;a.trigger(this,"beforeresize",{newSize:new f.Size(t,n)}),this.container.style.width=t+"px",this.container.style.height=n+"px",this.canvas.width=t,this.canvas.height=n,this._winSize=new f.Size(t,n);var r=this.container.offsetWidth,i=this.container.offsetHeight;this._viewSize=new f.Size(r,i),this._viewScale=new f.Size(t/r,n/i),e.FLIP_Y_AXIS&&(this.context.translate(0,n),this.context.scale(1,-1)),a.trigger(this,"resize")},attachInView:function(e){var t=this.document;e=e||window.container||t.body;while(e.firstChild)e.removeChild(e.firstChild);var n=this._container=t.createElement("div");n.style.position="relative",n.style.overflow="hidden",e.appendChild(n);var r=t.createElement("canvas");r.style.verticalAlign="bottom",this._canvas=r;var i=r.getContext("2d");this._context=i,this.resize(e.clientWidth,e.clientHeight),n.appendChild(r),this._setupEventCapturing(),this._isFullscreen&&this.fullscreen()},_setupEventCapturing:function(){function r(e){this._keysDown=this._keysDown||{},n.keyDown(e)}function i(e){n.keyUp(e)}var e=this.document,t=this.canvas,n=c.sharedDispatcher;this._setupMouseEventCapturing(),e.documentElement.addEventListener("keydown",r,!1),e.documentElement.addEventListener("keyup",i,!1)},_setupMouseEventCapturing:function(){var e=this.document,t=this.canvas,n=c.sharedDispatcher,r=function(t){t.locationInWindow=l(t.clientX,t.clientY),t.locationInCanvas=this.convertEventToCanvas(t);var r=function(e){e.locationInWindow=l(e.clientX,e.clientY),e.locationInCanvas=this.convertEventToCanvas(e),n.mouseDragged(e)}.bind(this),i=function(t){t.locationInWindow=l(t.clientX,t.clientY),t.locationInCanvas=this.convertEventToCanvas(t),e.body.removeEventListener("mousemove",r,!1),e.body.removeEventListener("mouseup",i,!1),n.mouseUp(t)}.bind(this);e.body.addEventListener("mousemove",r,!1),e.body.addEventListener("mouseup",i,!1),n.mouseDown(t)}.bind(this),i=function(e){e.locationInWindow=l(e.clientX,e.clientY),e.locationInCanvas=this.convertEventToCanvas(e),n.mouseMoved(e)}.bind(this);t.addEventListener("mousedown",r,!1),t.addEventListener("mousemove",i,!1)},runPreloadScene:function(){this.canvas||this.attachInView();var e=this.preloadScene;if(!e){var t=this.preloadSceneConstructor||n("./nodes/ProgressBarPreloadScene").ProgressBarPreloadScene;e=new t,this.preloadScene=e}a.addListener(e,"complete",function(e){this._isReady=!0,a.trigger(this,"ready",this)}.bind(this)),this.pushScene(e),this.startAnimation()},runWithScene:function(e){var t=n("./nodes/Scene").Scene;if(!(e instanceof t))throw new Error("Director.runWithScene must be given an instance of Scene");if(this._runningScene)throw new Error("You can't run a Scene if another Scene is already running. Use replaceScene or pushScene instead");this.pushScene(e),this.startAnimation()},replaceScene:function(e){var t=n("./nodes/Scene").Scene;if(!(e instanceof t))throw new Error("Director.replaceScene must be given an instance of Scene");var r=this.sceneStack.length;this._sendCleanupToScene=!0,this.sceneStack.pop(),this.sceneStack.push(e),this._nextScene=e},popScene:function(){throw new Error("Not implemented yet")},pushScene:function(e){var t=n("./nodes/Scene").Scene;if(!(e instanceof t))throw new Error("Director.pushScene must be given an instance of Scene");this._nextScene=e},startAnimation:function(){this.canvas||this.attachInView(),this._animating=!0,this.animate()},animate:function(){this._animating&&(this.drawScene(),this.animate._bound=this.animate._bound||this.animate.bind(this),window.requestAnimationFrame(this.animate._bound,this.canvas))},stopAnimation:function(){this._animationTimer&&(clearInterval(this._animationTimer),this._animationTimer=null),this._animating=!1},_calculateDeltaTime:function(){var e=(new Date).getTime()/1e3;this._nextDeltaTimeZero&&(this.dt=0,this._nextDeltaTimeZero=!1),this.dt=Math.max(0,e-this._lastUpdate),this._lastUpdate=e},drawScene:function(){this._calculateDeltaTime(),this.isPaused||p.sharedScheduler.tick(this.dt);var e=this.context;e.fillStyle=this.backgroundColor,e.fillRect(0,0,this.winSize.width,this.winSize.height),this._nextScene&&this._setNextScene();var t=new f.Rect(0,0,this.winSize.width,this.winSize.height);this._runningScene.visit(e,t),this.displayFPS&&this._showFPS()},_setNextScene:function(){this._runningScene&&(this._runningScene.onExit(),this._sendCleanupToScene&&this._runningScene.cleanup()),this._runningScene=this._nextScene,this._nextScene=null,this._runningScene.onEnter()},convertEventToCanvas:function(e){return this.convertLocationToCanvas(e.locationInWindow)},convertLocationToCanvas:function(t,n){var r=this.canvas.offsetLeft-(n?0:document.documentElement.scrollLeft),i=this.canvas.offsetTop-(n?0:document.documentElement.scrollTop),s=this.canvas;while(s=s.offsetParent)r+=s.offsetLeft-(n?0:s.scrollLeft),i+=s.offsetTop-(n?0:s.scrollTop);var o=f.ccpSub(t,l(r,i));return e.FLIP_Y_AXIS&&(o.y=this._viewSize.height-o.y),o.x=o.x*this._viewScale.width,o.y=o.y*this._viewScale.height,o},convertTouchToCanvas:function(e){return this.convertLocationToCanvas(new f.Point(e.pageX,e.pageY),!0)},_showFPS:function(){if(!this._fpsLabel){var e=n("./nodes/Label").Label;this._fpsLabel=new e({string:"",fontSize:16}),this._fpsLabel.anchorPoint=l(0,0),this._fpsLabel.position=l(10,10),this._frames=0,this._accumDt=0}this._frames++,this._accumDt+=this.dt;if(this._accumDt>1/3){var t=this._frames/this._accumDt;this._frames=0,this._accumDt=0,this._fpsLabel.string="FPS: "+(Math.round(t*100)/100).toString()}this._fpsLabel.visit(this.context)}}),Object.defineProperty(d,"sharedDirector",{get:function(){return d._instance||(window.navigator.userAgent.match(/(iPhone|iPod|iPad|Android)/)?d._instance=new v:d._instance=new this),d._instance},enumerable:!0}),v.inherit(d,{isTouchScreen:!0,isMobile:!0,viewportSize:null,fullscreen:function(){this._isFullscreen=!0;if(!this._container)return;var e=this.document.querySelector("meta[name=viewport]");e||(e=this.document.createElement("meta"),e.setAttribute("name","viewport"),this.document.querySelector("head").appendChild(e)),this.container.style.position="fixed",this.container.style.left=0,this.container.style.top=0,a.addListener(this,"orientationchange",this._adjustFullscreen.bind(this)),this.document.body.addEventListener("touchstart",function(e){this.window.scrollTo(0,0),e.preventDefault()}.bind(this)),this._adjustFullscreen()},_adjustFullscreen:function(){if(!this._container)return;var e;this._forcedOrientation=="landscape"||this.orientation.match(/landscape/)?e=this.viewportSize.landscape:e=this.viewportSize.portrait,this.resize(e.width,e.height);var t=this.document.querySelector("meta[name=viewport]");t.setAttribute("content","initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, width="+this._winSize.width+", height="+this._winSize.height),this.window.scrollTo(0,0)},forceOrientation:function(e){this._forcedOrientation=e,this._isFullscreen&&this._adjustFullscreen()},_setupEventCapturing:function(){var e=this.document;this._setupTouchEventCapturing(),typeof top.window.orientation!="undefined"&&(this._updateOrientation(),e.body.addEventListener("orientationchange",this._updateOrientation.bind(this),!1))},_setupTouchEventCapturing:function(){var e=this.document,t=this.canvas,n=h.sharedDispatcher,r=function(e){n.touchesBegan(e)}.bind(this),i=function(e){n.touchesMoved(e)}.bind(this),s=function(e){n.touchesEnded(e)}.bind(this),o=function(e){n.touchesCancelled(e)}.bind(this);t.addEventListener("touchstart",r,!1),t.addEventListener("touchmove",i,!1),t.addEventListener("touchend",s,!1),t.addEventListener("touchcancel",o,!1)},_updateOrientation:function(){switch(top.window.orientation){case 0:this.orientation="portrait";break;case 90:this.orientation="landscapeLeft";break;case-90:this.orientation="landscapeRight";break;case 180:this.orientation="portraitUpsideDown"}a.trigger(this,"orientationchange")}}),m.inherit(d,{frameRate:60,_calculateDeltaTime:function(){this._nextDeltaTimeZero&&(this.dt=0,this._nextDeltaTimeZero=!1),this.dt=1/this.frameRate},startAnimation:function(){this._animationTimer=setInterval(this.drawScene.bind(this),1e3/this.frameRate),this.drawScene()}}),Object.defineProperty(m,"sharedDirector",Object.getOwnPropertyDescriptor(d,"sharedDirector")),t.Director=d,t.DirectorFixedSpeed=m},mimetype:"application/javascript",remote:!1},t.resources["/libs/cocos2d/EventDispatcher.js"]={data:function(t,n,r,i,s,o){"use strict";function f(){f.superclass.constructor.call(this),this.keyboardDelegates=[],this.mouseDelegates=[],this._keysDown={}}var u=n("util"),a=n("geometry");f.inherit(Object,{dispatchEvents:!0,keyboardDelegates:null,mouseDelegates:null,_keysDown:null,addDelegate:function(e){var t=e.delegate,n=e.priority,r=e.flags,i=e.list,s={delegate:t,priority:n,flags:r},o=!1;for(var u=0;u<i.length;u++){var a=i[u];if(n<a.priority){i.splice(u,0,s),o=!0;break}}o||i.push(s)},removeDelegate:function(e){var t=e.delegate,n=e.list,r=-1,i;for(i=0;i<n.length;i++){var s=n[i];if(s.delegate==t){r=i;break}}if(r==-1)return;n.splice(r,1)},removeAllDelegates:function(e){var t=e.list;t.splice(0,t.length-1)},addMouseDelegate:function(e){var t=e.delegate,n=e.priority,r=0;this.addDelegate({delegate:t,priority:n,flags:r,list:this.mouseDelegates})},removeMouseDelegate:function(e){var t=e.delegate;this.removeDelegate({delegate:t,list:this.mouseDelegates})},removeAllMouseDelegate:function(){this.removeAllDelegates({list:this.mouseDelegates})},addKeyboardDelegate:function(e){var t=e.delegate,n=e.priority,r=0;this.addDelegate({delegate:t,priority:n,flags:r,list:this.keyboardDelegates})},removeKeyboardDelegate:function(e){var t=e.delegate;this.removeDelegate({delegate:t,list:this.keyboardDelegates})},removeAllKeyboardDelegate:function(){this.removeAllDelegates({list:this.keyboardDelegates})},mouseDown:function(e){if(!this.dispatchEvents)return;this._previousMouseMovePosition=a.ccp(e.clientX,e.clientY),this._previousMouseDragPosition=a.ccp(e.clientX,e.clientY);for(var t=0;t<this.mouseDelegates.length;t++){var n=this.mouseDelegates[t];if(n.delegate.mouseDown){var r=n.delegate.mouseDown(e);if(r)break}}},mouseMoved:function(t){if(!this.dispatchEvents)return;this._previousMouseMovePosition?(t.deltaX=t.clientX-this._previousMouseMovePosition.x,t.deltaY=t.clientY-this._previousMouseMovePosition.y,e.FLIP_Y_AXIS&&(t.deltaY*=-1)):(t.deltaX=0,t.deltaY=0),this._previousMouseMovePosition=a.ccp(t.clientX,t.clientY);for(var n=0;n<this.mouseDelegates.length;n++){var r=this.mouseDelegates[n];if(r.delegate.mouseMoved){var i=r.delegate.mouseMoved(t);if(i)break}}},mouseDragged:function(t){if(!this.dispatchEvents)return;this._previousMouseDragPosition?(t.deltaX=t.clientX-this._previousMouseDragPosition.x,t.deltaY=t.clientY-this._previousMouseDragPosition.y,e.FLIP_Y_AXIS&&(t.deltaY*=-1)):(t.deltaX=0,t.deltaY=0),this._previousMouseDragPosition=a.ccp(t.clientX,t.clientY);for(var n=0;n<this.mouseDelegates.length;n++){var r=this.mouseDelegates[n];if(r.delegate.mouseDragged){var i=r.delegate.mouseDragged(t);if(i)break}}},mouseUp:function(e){if(!this.dispatchEvents)return;for(var t=0;t<this.mouseDelegates.length;t++){var n=this.mouseDelegates[t];if(n.delegate.mouseUp){var r=n.delegate.mouseUp(e);if(r)break}}},keyDown:function(e){var t=e.keyCode;if(!this.dispatchEvents)return;if(this._keysDown[t])return this.keyRepeat(e);this._keysDown[t]=!0;for(var n=0;n<this.keyboardDelegates.length;n++){var r=this.keyboardDelegates[n];if(r.delegate.keyDown){var i=r.delegate.keyDown(e);if(i)break}}},keyRepeat:function(e){for(var t=0;t<this.keyboardDelegates.length;t++){var n=this.keyboardDelegates[t];if(n.delegate.keyRepeat){var r=n.delegate.keyRepeat(e);if(r)break}}},keyUp:function(e){if(!this.dispatchEvents)return;var t=e.keyCode;this._keysDown[t]&&delete this._keysDown[t];for(var n=0;n<this.keyboardDelegates.length;n++){var r=this.keyboardDelegates[n];if(r.delegate.keyUp){var i=r.delegate.keyUp(e);if(i)break}}}}),Object.defineProperty(f,"sharedDispatcher",{get:function(){return f._instance||(f._instance=new this),f._instance},enumerable:!0}),t.EventDispatcher=f},mimetype:"application/javascript",remote:!1},t.resources["/libs/cocos2d/index.js"]={data:function(e,t,n,r,i,s){"use strict";var o=t("util"),u=t("path"),a="nodes actions TextureAtlas Texture2D SpriteFrame SpriteFrameCache Director Animation AnimationCache Scheduler ActionManager TMXXMLParser".split(" "),f={nodes:t("./nodes"),actions:t("./actions")};o.each(a,function(e,n){o.extend(f,t("./"+e))}),r.exports=f},mimetype:"application/javascript",remote:!1},t.resources["/libs/cocos2d/init.js"]={data:function(t,n,r,i,s,o){var u=n("path");t.main=function(){typeof e=="undefined"&&(window.cc={}),n.paths.push(u.join(o,"libs")),n("./remote_resources_patch"),n("./js_extensions"),e.STANDALONE||(window.XMLHttpRequest=parent.XMLHttpRequest);var t=n("./config");for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);if(u.exists("/config.js")){t=n("/config");for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])}e.ENABLE_DEPRECATED_METHODS&&n("./legacy")}},mimetype:"application/javascript",remote:!1},t.resources["/libs/cocos2d/js_extensions.js"]={data:function(e,t,n,r,i,s){"use strict";function u(e,t,n){return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,n&&o.extend(e.prototype,n),e}function a(e,t){return u(this,e,t)}var o=t("util");Object.extend||(Object.extend=u),Function.prototype.inherit||(Function.prototype.inherit=a);if(!("id"in Object.prototype)){var f=1;Object.defineProperty(Object.prototype,"id",{get:function(){if(this===Object.prototype||Object.getPrototypeOf(this)===Object.prototype)return;var e=f++;return this.id=e,e},set:function(e){if(this===Object.prototype)return;Object.getPrototypeOf(this)===Object.prototype?Object.defineProperty(this,"id",{configurable:!0,writable:!0,enumerable:!0,value:e}):Object.defineProperty(this,"id",{configurable:!0,writable:!0,enumerable:!1,value:e})}})}"superclass"in Function.prototype||Object.defineProperty(Function.prototype,"superclass",{get:function(){return Object.getPrototypeOf(this.prototype)},set:function(e){Object.defineProperty(this,"superclass",{configurable:!0,writable:!0}),this.superclass=e}}),"__superclass__"in Function.prototype||Object.defineProperty(Function.prototype,"__superclass__",{get:function(){return Object.getPrototypeOf(this.prototype)}})},mimetype:"application/javascript",remote:!1},t.resources["/libs/cocos2d/legacy.js"]={data:function(e,t,n,r,i,s){function a(e){e.get=o.get,e.set=o.set,e.extend=o.extend,e.create=o.create,"get set extend triggerBeforeChanged triggerChanged".w.forEach(function(t){e.prototype[t]=o.prototype[t],e.prototype.hasOwnProperty("init")||(e.prototype.init=e)})}var o=t("./libs/bobject").BObject,u=t("./libs/util"),f={_:"ActionManager Director SpriteFrame TMXXMLParser Animation EventDispatcher SpriteFrameCache Texture2D AnimationCache Scheduler TextureAtlas".w,nodes:"AtlasNode BatchNode index Label LabelAtlas Layer Menu MenuItem Node PreloadScene ProgressBar RenderTexture Scene Sprite TMXLayer TMXTiledMap Transition".w,actions:"Action ActionEase ActionInterval ActionInstant".w};for(var l in f){var c=f[l],h=l=="_"?"":l+"/";c.forEach(function(e){var n=t("./"+h+e);for(var r in n)n.hasOwnProperty(r)&&typeof n[r]=="function"&&a(n[r])})}},mimetype:"application/javascript",remote:!1},t.resources["/libs/cocos2d/libs/base64.js"]={data:function(e,t,n,r,i,s){var o=t("JXGUtil"),u={decode:function(e){return o.Util.Base64.decode(e)},decodeAsArray:function(e,t){t=t||1;var n=o.Util.Base64.decode(e),r=[],i,s,u;for(i=0,u=n.length/t;i<u;i++){r[i]=0;for(s=t-1;s>=0;--s)r[i]+=n.charCodeAt(i*t+s)<<s*8}return r},encode:function(e){return o.Util.Base64.encode(e)}};r.exports=u},mimetype:"application/javascript",remote:!1},t.resources["/libs/cocos2d/libs/bobject.js"]={data:function(e,t,n,r,i,s){"use strict";function a(e){return e.js_accessors_||(e.js_accessors_={}),e.js_accessors_}function f(e){return e.js_bindings_||(e.js_bindings_={}),e.js_bindings_}function l(e,t,n,r,i){a(e)[t]={key:r,target:n},i||e.triggerChanged(t)}function h(){return this.init.apply(this,arguments)}var o=t("util"),u=t("events"),c=0;h.prototype=o.extend(h.prototype,{init:function(){},get:function(e){var t=!1;if(~e.indexOf(".")){var n=e.split(".");e=n.shift(),t=n.join(".")}var r=a(this)[e],i;return r?i=r.target.get(r.key):this["get_"+e]?i=this["get_"+e]():i=this[e],t?i.get(t):i},set:function(e,t){var n=a(this)[e],r=this.get(e);this.triggerBeforeChanged(e,r),n?n.target.set(n.key,t):this["set_"+e]?this["set_"+e](t):this[e]=t,this.triggerChanged(e,r)},setValues:function(e){for(var t in e)e.hasOwnProperty(t)&&this.set(t,e[t])},changed:function(e){},notify:function(e,t){var n=a(this)[e];n&&n.target.notify(n.key,t)},triggerBeforeChanged:function(e,t){u.trigger(this,e.toLowerCase()+"_before_changed",t)},triggerChanged:function(e,t){u.trigger(this,e.toLowerCase()+"_changed",t)},bindTo:function(e,t,n,r){n=n||e;var i=this;this.unbind(e);var s=this.get(e);f(this)[e]=u.addListener(t,n.toLowerCase()+"_changed",function(t){i.triggerChanged(e,t)}),l(this,e,t,n,r)},unbind:function(e){var t=f(this)[e];if(!t)return;delete f(this)[e],u.removeListener(t);var n=this.get(e);delete a(this)[e],this[e]=n},unbindAll:function(){var e=[],t=f(this);for(var n in t)t.hasOwnProperty(n)&&this.unbind(n)}}),h.create=function(){var e=Object.create(this.prototype),t=e.constructor.apply(e,arguments);return t||e},h.extend=function(e,t){var n,r;arguments.length<2?(r=e,t=this):n=e;if(arguments.length>1&&this!==h)throw new Error("extend only accepts 1 argument");n=n||function(){return this.init.apply(this,arguments)};var i=[],s,u;return o.extend(n,t),n.prototype=Object.create(t.prototype),n.prototype.constructor=n,r&&o.extend(n.prototype,r),n},h.get=h.prototype.get,h.set=h.prototype.set;var p=h.extend({init:function(e){this.array=e||[],this.set("length",this.array.length)},getAt:function(e){return this.array[e]},setAt:function(e,t){var n=this.array[e];this.array[e]=t,u.trigger(this,"set_at",e,n)},insertAt:function(e,t){this.array.splice(e,0,t),this.set("length",this.array.length),u.trigger(this,"insert_at",e)},removeAt:function(e){var t=this.array[e];return this.array.splice(e,1),this.set("length",this.array.length),u.trigger(this,"remove_at",e,t),t},getArray:function(){return this.array},push:function(e){return this.insertAt(this.array.length,e),this.array.length},pop:function(){return this.removeAt(this.array.length-1)}});e.BObject=h,e.BArray=p},mimetype:"application/javascript",remote:!1},t.resources["/libs/cocos2d/libs/geometry.js"]={data:function(e,t,n,r,i,s){"use strict";var o=t("util"),u=/\{\s*([\d.\-]+)\s*,\s*([\d.\-]+)\s*\}/,a=/\{\s*(\{[\s\d,.\-]+\})\s*,\s*(\{[\s\d,.\-]+\})\s*\}/;Math.PI_2=1.5707963267948966;var f={Point:function(e,t){this.x=e,this.y=t},Point3D:function(e,t,n){this.x=e,this.y=t,this.z=n},Size:function(e,t){this.width=e,this.height=t},Size3D:function(e,t,n){this.width=e,this.height=t,this.depth=n},Rect:function(e,t,n,r){this.origin=new f.Point(e,t),this.size=new f.Size(n,r)},TransformMatrix:function(e,t,n,r,i,s){this.a=e,this.b=t,this.c=n,this.d=r,this.tx=i,this.ty=s},BezierConfig:function(e,t,n){this.controlPoint1=o.copy(e),this.controlPoint2=o.copy(t),this.endPosition=o.copy(n)},ccp:function(e,t){return r.exports.pointMake(e,t)},ccpAdd:function(e,t){return f.ccp(e.x+t.x,e.y+t.y)},ccpSub:function(e,t){return f.ccp(e.x-t.x,e.y-t.y)},ccpMult:function(e,t){return f.ccp(e.x*t.x,e.y*t.y)},ccpNeg:function(e){return f.ccp(-e.x,-e.y)},ccpRound:function(e){return f.ccp(Math.round(e.x),Math.round(e.y))},ccpCeil:function(e){return f.ccp(Math.ceil(e.x),Math.ceil(e.y))},ccpFloor:function(e){return f.ccp(Math.floor(e.x),Math.floor(e.y))},PointZero:function(){return f.ccp(0,0)},rectMake:function(e,t,n,r){return new f.Rect(e,t,n,r)},rectFromString:function(e){var t=e.match(a),n=f.pointFromString(t[1]),r=f.sizeFromString(t[2]);return f.rectMake(n.x,n.y,r.width,r.height)},sizeMake:function(e,t){return new f.Size(e,t)},sizeFromString:function(e){var t=e.match(u),n=parseFloat(t[1]),r=parseFloat(t[2]);return f.sizeMake(n,r)},pointMake:function(e,t){return new f.Point(e,t)},pointFromString:function(e){var t=e.match(u),n=parseFloat(t[1]),r=parseFloat(t[2]);return f.pointMake(n,r)},rectContainsPoint:function(e,t){return t.x>=e.origin.x&&t.x<=e.origin.x+e.size.width&&t.y>=e.origin.y&&t.y<=e.origin.y+e.size.height},rectUnion:function(e,t){var n=new f.Rect(0,0,0,0);return n.origin.x=Math.min(e.origin.x,t.origin.x),n.origin.y=Math.min(e.origin.y,t.origin.y),n.size.width=Math.max(e.origin.x+e.size.width,t.origin.x+t.size.width)-n.origin.x,n.size.height=Math.max(e.origin.y+e.size.height,t.origin.y+t.size.height)-n.origin.y,n},rectOverlapsRect:function(e,t){return e.origin.x+e.size.width<t.origin.x?!1:t.origin.x+t.size.width<e.origin.x?!1:e.origin.y+e.size.height<t.origin.y?!1:t.origin.y+t.size.height<e.origin.y?!1:!0},rectIntersection:function(e,t){var n=new f.Rect(Math.max(f.rectGetMinX(e),f.rectGetMinX(t)),Math.max(f.rectGetMinY(e),f.rectGetMinY(t)),0,0);return n.size.width=Math.min(f.rectGetMaxX(e),f.rectGetMaxX(t))-f.rectGetMinX(n),n.size.height=Math.min(f.rectGetMaxY(e),f.rectGetMaxY(t))-f.rectGetMinY(n),n},pointEqualToPoint:function(e,t){return e.x==t.x&&e.y==t.y},sizeEqualToSize:function(e,t){return e.width==t.width&&e.height==t.height},rectEqualToRect:function(e,t){return r.exports.sizeEqualToSize(e.size,t.size)&&r.exports.pointEqualToPoint(e.origin,t.origin)},rectGetMinX:function(e){return e.origin.x},rectGetMinY:function(e){return e.origin.y},rectGetMaxX:function(e){return e.origin.x+e.size.width},rectGetMaxY:function(e){return e.origin.y+e.size.height},boundingRectMake:function(e,t,n,r){var i=
Math.min(e.x,t.x,n.x,r.x),s=Math.min(e.y,t.y,n.y,r.y),o=Math.max(e.x,t.x,n.x,r.x),u=Math.max(e.y,t.y,n.y,r.y);return new f.Rect(i,s,o-i,u-s)},pointApplyAffineTransform:function(e,t){return new f.Point(t.a*e.x+t.c*e.y+t.tx,t.b*e.x+t.d*e.y+t.ty)},rectApplyAffineTransform:function(e,t){var n=f.ccp(f.rectGetMinX(e),f.rectGetMinY(e)),r=f.ccp(f.rectGetMaxX(e),f.rectGetMinY(e)),i=f.ccp(f.rectGetMinX(e),f.rectGetMaxY(e)),s=f.ccp(f.rectGetMaxX(e),f.rectGetMaxY(e));return n=f.pointApplyAffineTransform(n,t),r=f.pointApplyAffineTransform(r,t),i=f.pointApplyAffineTransform(i,t),s=f.pointApplyAffineTransform(s,t),f.boundingRectMake(n,r,i,s)},affineTransformInvert:function(e){var t=1/(e.a*e.d-e.b*e.c);return new f.TransformMatrix(t*e.d,-t*e.b,-t*e.c,t*e.a,t*(e.c*e.ty-e.d*e.tx),t*(e.b*e.tx-e.a*e.ty))},affineTransformConcat:function(e,t){return new f.TransformMatrix(e.a*t.a+e.b*t.c,e.a*t.b+e.b*t.d,e.c*t.a+e.d*t.c,e.c*t.b+e.d*t.d,e.tx*t.a+e.ty*t.c+t.tx,e.tx*t.b+e.ty*t.d+t.ty)},degreesToRadians:function(e){return e/180*Math.PI},radiansToDegrees:function(e){return e*(180/Math.PI)},affineTransformTranslate:function(e,t,n){var r=o.copy(e);return r.tx=e.tx+e.a*t+e.c*n,r.ty=e.ty+e.b*t+e.d*n,r},affineTransformRotate:function(e,t){var n=Math.sin(t),r=Math.cos(t);return new f.TransformMatrix(e.a*r+e.c*n,e.b*r+e.d*n,e.c*r-e.a*n,e.d*r-e.b*n,e.tx,e.ty)},affineTransformScale:function(e,t,n){return n===undefined&&(n=t),new f.TransformMatrix(e.a*t,e.b*t,e.c*n,e.d*n,e.tx,e.ty)},affineTransformIdentity:function(){return new f.TransformMatrix(1,0,0,1,0,0)}};Object.defineProperty(f.Point,"zero",{get:function(){return new f.Point(0,0)}}),r.exports=f},mimetype:"application/javascript",remote:!1},t.resources["/libs/cocos2d/libs/gzip.js"]={data:function(e,t,n,r,i,s){var o=t("./JXGUtil"),u={unzip:function(e){return(new o.Util.Unzip(e)).unzip()[0][0]},unzipBase64:function(e){return(new o.Util.Unzip(o.Util.Base64.decodeAsArray(e))).unzip()[0][0]},unzipBase64AsArray:function(e,t){t=t||1;var n=this.unzipBase64(e),r=[],i,s,o;for(i=0,o=n.length/t;i<o;i++){r[i]=0;for(s=t-1;s>=0;--s)r[i]+=n.charCodeAt(i*t+s)<<s*8}return r},unzipAsArray:function(e,t){t=t||1;var n=this.unzip(e),r=[],i,s,o;for(i=0,o=n.length/t;i<o;i++){r[i]=0;for(s=t-1;s>=0;--s)r[i]+=n.charCodeAt(i*t+s)<<s*8}return r}};r.exports=u},mimetype:"application/javascript",remote:!1},t.resources["/libs/cocos2d/libs/JXGUtil.js"]={data:function(e,t,n,r,i,s){var o={};o.Util={},o.Util.Unzip=function(e){function L(){return T+=8,E<w.length?w[E++]:-1}function A(){x=1}function O(){var e;return T++,e=x&1,x>>=1,x==0&&(x=L(),e=x&1,x=x>>1|128),e}function M(e){var t=0,n=e;while(n--)t=t<<1|O();return e&&(t=d[t]>>8-e),t}function _(){l=0}function D(e){p++,f[l++]=e,t.push(String.fromCharCode(e)),l==32768&&(l=0)}function P(){this.b0=0,this.b1=0,this.jump=null,this.jumppos=-1}function $(){for(;;){if(W[z]>=V)return-1;if(X[W[z]]==z)return W[z]++;W[z]++}}function J(){var e=I[F],t;r&&document.write("<br>len:"+z+" treepos:"+F);if(z==17)return-1;F++,z++,t=$(),r&&document.write("<br>IsPat "+t);if(t>=0)e.b0=t,r&&document.write("<br>b0 "+e.b0);else{e.b0=32768,r&&document.write("<br>b0 "+e.b0);if(J())return-1}t=$();if(t>=0)e.b1=t,r&&document.write("<br>b1 "+e.b1),e.jump=null;else{e.b1=32768,r&&document.write("<br>b1 "+e.b1),e.jump=I[F],e.jumppos=F;if(J())return-1}return z--,0}function K(e,t,n,i){var s;r&&document.write("currentTree "+e+" numval "+t+" lengths "+n+" show "+i),I=e,F=0,X=n,V=t;for(s=0;s<17;s++)W[s]=0;z=0;if(J())return r&&alert("invalid huffman tree\n"),-1;if(r){document.write("<br>Tree: "+I.length);for(var o=0;o<32;o++)document.write("Places["+o+"].b0="+I[o].b0+"<br>"),document.write("Places["+o+"].b1="+I[o].b1+"<br>")}return 0}function Q(e){var t,n,i=0,s=e[i],o;for(;;){o=O(),r&&document.write("b="+o);if(o){if(!(s.b1&32768))return r&&document.write("ret1"),s.b1;s=s.jump,t=e.length;for(n=0;n<t;n++)if(e[n]===s){i=n;break}}else{if(!(s.b0&32768))return r&&document.write("ret2"),s.b0;i++,s=e[i]}}return r&&document.write("ret3"),-1}function G(){var e,t,n,i,s;do{e=O(),n=M(2);switch(n){case 0:r&&alert("Stored\n");break;case 1:r&&alert("Fixed Huffman codes\n");break;case 2:r&&alert("Dynamic Huffman codes\n");break;case 3:r&&alert("Reserved block type!!\n");break;default:r&&alert("Unexpected value %d!\n",n)}if(n==0){var o,u;A(),o=L(),o|=L()<<8,u=L(),u|=L()<<8,(o^~u)&65535&&document.write("BlockLen checksum mismatch\n");while(o--)t=L(),D(t)}else if(n==1){var a;for(;;){a=d[M(7)]>>1,a>23?(a=a<<1|O(),a>199?(a-=128,a=a<<1|O()):(a-=48,a>143&&(a+=136))):a+=256;if(a<256)D(a);else{if(a==256)break;var s,c;a-=257,s=M(m[a])+v[a],a=d[M(5)]>>3,y[a]>8?(c=M(8),c|=M(y[a]-8)<<8):c=M(y[a]),c+=g[a];for(a=0;a<s;a++){var t=f[l-c&32767];D(t)}}}}else if(n==2){var a,h,p,w,E,S=new Array(320);p=257+M(5),w=1+M(5),E=4+M(4);for(a=0;a<19;a++)S[a]=0;for(a=0;a<E;a++)S[b[a]]=M(3);s=j.length;for(i=0;i<s;i++)j[i]=new P;if(K(j,19,S,0))return _(),1;if(r){document.write("<br>distanceTree");for(var x=0;x<j.length;x++)document.write("<br>"+j[x].b0+" "+j[x].b1+" "+j[x].jump+" "+j[x].jumppos)}h=p+w,i=0;var N=-1;r&&document.write("<br>n="+h+" bits: "+T+"<br>");while(i<h){N++,a=Q(j),r&&document.write("<br>"+N+" i:"+i+" decode: "+a+"    bits "+T+"<br>");if(a<16)S[i++]=a;else if(a==16){var C;a=3+M(2);if(i+a>h)return _(),1;C=i?S[i-1]:0;while(a--)S[i++]=C}else{a==17?a=3+M(3):a=11+M(7);if(i+a>h)return _(),1;while(a--)S[i++]=0}}s=B.length;for(i=0;i<s;i++)B[i]=new P;if(K(B,p,S,0))return _(),1;s=B.length;for(i=0;i<s;i++)j[i]=new P;var k=new Array;for(i=p;i<S.length;i++)k[i-p]=S[i];if(K(j,w,k,0))return _(),1;r&&document.write("<br>literalTree");for(;;){a=Q(B);if(a>=256){var s,c;a-=256;if(a==0)break;a--,s=M(m[a])+v[a],a=Q(j),y[a]>8?(c=M(8),c|=M(y[a]-8)<<8):c=M(y[a]),c+=g[a];while(s--){var t=f[l-c&32767];D(t)}}else D(a)}}}while(!e);return _(),A(),0}function Y(){r&&alert("NEXTFILE"),t=[];var e=[];c=!1,e[0]=L(),e[1]=L(),r&&alert("type: "+e[0]+" "+e[1]),e[0]==parseInt("78",16)&&e[1]==parseInt("da",16)&&(r&&alert("GEONExT-GZIP"),G(),r&&alert(t.join("")),u[s]=new Array(2),u[s][0]=t.join(""),u[s][1]="geonext.gxt",s++),e[0]==parseInt("1f",16)&&e[1]==parseInt("8b",16)&&(r&&alert("GZIP"),Z(),r&&alert(t.join("")),u[s]=new Array(2),u[s][0]=t.join(""),u[s][1]="file",s++);if(e[0]==parseInt("50",16)&&e[1]==parseInt("4b",16)){c=!0,e[2]=L(),e[3]=L();if(e[2]==parseInt("3",16)&&e[3]==parseInt("4",16)){e[0]=L(),e[1]=L(),r&&alert("ZIP-Version: "+e[1]+" "+e[0]/10+"."+e[0]%10),i=L(),i|=L()<<8,r&&alert("gpflags: "+i);var n=L();n|=L()<<8,r&&alert("method: "+n),L(),L(),L(),L();var o=L();o|=L()<<8,o|=L()<<16,o|=L()<<24;var a=L();a|=L()<<8,a|=L()<<16,a|=L()<<24;var f=L();f|=L()<<8,f|=L()<<16,f|=L()<<24,r&&alert("local CRC: "+o+"\nlocal Size: "+f+"\nlocal CompSize: "+a);var l=L();l|=L()<<8;var d=L();d|=L()<<8,r&&alert("filelen "+l),m=0,C=[];while(l--){var v=L();v=="/"|v==":"?m=0:m<N-1&&(C[m++]=String.fromCharCode(v))}r&&alert("nameBuf: "+C),k||(k=C);var m=0;while(m<d)v=L(),m++;h=4294967295,p=0,(f=0)&&r&&alert("skipdir"),n==8&&(G(),r&&alert(t.join("")),u[s]=new Array(2),u[s][0]=t.join(""),u[s][1]=C.join(""),s++),Z()}}}function Z(){var e,t=[],n,s,o,u,a;i&8&&(t[0]=L(),t[1]=L(),t[2]=L(),t[3]=L(),t[0]==parseInt("50",16)&&t[1]==parseInt("4b",16)&&t[2]==parseInt("07",16)&&t[3]==parseInt("08",16)?(e=L(),e|=L()<<8,e|=L()<<16,e|=L()<<24):e=t[0]|t[1]<<8|t[2]<<16|t[3]<<24,n=L(),n|=L()<<8,n|=L()<<16,n|=L()<<24,s=L(),s|=L()<<8,s|=L()<<16,s|=L()<<24,r&&alert("CRC:")),c&&Y(),t[0]=L();if(t[0]!=8)return r&&alert("Unknown compression method!"),0;i=L(),r&&i&~parseInt("1f",16)&&alert("Unknown flags set!"),L(),L(),L(),L(),L(),o=L();if(i&4){t[0]=L(),t[2]=L(),z=t[0]+256*t[1],r&&alert("Extra field size: "+z);for(u=0;u<z;u++)L()}if(i&8){u=0,C=[];while(a=L()){if(a=="7"||a==":")u=0;u<N-1&&(C[u++]=a)}r&&alert("original file name: "+C)}if(i&16)while(a=L());i&2&&(L(),L()),G(),e=L(),e|=L()<<8,e|=L()<<16,e|=L()<<24,s=L(),s|=L()<<8,s|=L()<<16,s|=L()<<24,c&&Y()}var t=[],n="",r=!1,i,s=0,u=[],a,f=new Array(32768),l=0,c=!1,h,p,d=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254,1,129,65,193,33,161,97,225,17,145,81,209,49,177,113,241,9,137,73,201,41,169,105,233,25,153,89,217,57,185,121,249,5,133,69,197,37,165,101,229,21,149,85,213,53,181,117,245,13,141,77,205,45,173,109,237,29,157,93,221,61,189,125,253,3,131,67,195,35,163,99,227,19,147,83,211,51,179,115,243,11,139,75,203,43,171,107,235,27,155,91,219,59,187,123,251,7,135,71,199,39,167,103,231,23,151,87,215,55,183,119,247,15,143,79,207,47,175,111,239,31,159,95,223,63,191,127,255],v=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],m=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,99,99],g=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],y=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],b=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],w=e,E=0,S=0,x=1,T=0,N=256,C=[],k,H=288,B=new Array(H),j=new Array(32),F=0,I=null,q=null,R=new Array(64),U=new Array(64),z=0,W=new Array(17);W[0]=0;var X,V;o.Util.Unzip.prototype.unzipFile=function(e){var t;this.unzip();for(t=0;t<u.length;t++)if(u[t][1]==e)return u[t][0]},o.Util.Unzip.prototype.unzip=function(){return r&&alert(w),Y(),u}},o.Util.Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t=[],n,r,i,s,u,a,f,l=0;e=o.Util.Base64._utf8_encode(e);while(l<e.length)n=e.charCodeAt(l++),r=e.charCodeAt(l++),i=e.charCodeAt(l++),s=n>>2,u=(n&3)<<4|r>>4,a=(r&15)<<2|i>>6,f=i&63,isNaN(r)?a=f=64:isNaN(i)&&(f=64),t.push([this._keyStr.charAt(s),this._keyStr.charAt(u),this._keyStr.charAt(a),this._keyStr.charAt(f)].join(""));return t.join("")},decode:function(e,t){var n=[],r,i,s,u,a,f,l,c=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(c<e.length)u=this._keyStr.indexOf(e.charAt(c++)),a=this._keyStr.indexOf(e.charAt(c++)),f=this._keyStr.indexOf(e.charAt(c++)),l=this._keyStr.indexOf(e.charAt(c++)),r=u<<2|a>>4,i=(a&15)<<4|f>>2,s=(f&3)<<6|l,n.push(String.fromCharCode(r)),f!=64&&n.push(String.fromCharCode(i)),l!=64&&n.push(String.fromCharCode(s));return n=n.join(""),t&&(n=o.Util.Base64._utf8_decode(n)),n},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");var t="";for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(r&63|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(r&63|128))}return t},_utf8_decode:function(e){var t=[],n=0,r=0,i=0,s=0;while(n<e.length)r=e.charCodeAt(n),r<128?(t.push(String.fromCharCode(r)),n++):r>191&&r<224?(i=e.charCodeAt(n+1),t.push(String.fromCharCode((r&31)<<6|i&63)),n+=2):(i=e.charCodeAt(n+1),s=e.charCodeAt(n+2),t.push(String.fromCharCode((r&15)<<12|(i&63)<<6|s&63)),n+=3);return t.join("")},_destrip:function(e,t){var n=[],r,i,s=[];t==null&&(t=76),e.replace(/ /g,""),r=e.length/t;for(i=0;i<r;i++)n[i]=e.substr(i*t,t);r!=e.length/t&&(n[n.length]=e.substr(r*t,e.length-r*t));for(i=0;i<n.length;i++)s.push(n[i]);return s.join("\n")},decodeAsArray:function(e){var t=this.decode(e),n=[],r;for(r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n},decodeGEONExT:function(e){return decodeAsArray(destrip(e),!1)}},o.Util.asciiCharCodeAt=function(e,t){var n=e.charCodeAt(t);if(n>255)switch(n){case 8364:n=128;break;case 8218:n=130;break;case 402:n=131;break;case 8222:n=132;break;case 8230:n=133;break;case 8224:n=134;break;case 8225:n=135;break;case 710:n=136;break;case 8240:n=137;break;case 352:n=138;break;case 8249:n=139;break;case 338:n=140;break;case 381:n=142;break;case 8216:n=145;break;case 8217:n=146;break;case 8220:n=147;break;case 8221:n=148;break;case 8226:n=149;break;case 8211:n=150;break;case 8212:n=151;break;case 732:n=152;break;case 8482:n=153;break;case 353:n=154;break;case 8250:n=155;break;case 339:n=156;break;case 382:n=158;break;case 376:n=159;break;default:}return n},o.Util.utf8Decode=function(e){var t=[],n=0,r=0,i=0,s=0;while(n<e.length)r=e.charCodeAt(n),r<128?(t.push(String.fromCharCode(r)),n++):r>191&&r<224?(s=e.charCodeAt(n+1),t.push(String.fromCharCode((r&31)<<6|s&63)),n+=2):(s=e.charCodeAt(n+1),c3=e.charCodeAt(n+2),t.push(String.fromCharCode((r&15)<<12|(s&63)<<6|c3&63)),n+=3);return t.join("")},r.exports=o},mimetype:"application/javascript",remote:!1},t.resources["/libs/cocos2d/libs/Plist.js"]={data:function(e,t,n,r,i,s){"use strict";function y(e){var t=e.file,r=e.data;t&&!r&&(r=n(t));var i=new DOMParser,s=i.parseFromString(r,"text/xml"),u=s.documentElement;if(u.tagName!="plist")throw"Not a plist file";var a=null;for(var f=0,l=u.childNodes.length;f<l;f++){a=u.childNodes[f];if(a.nodeType==o)break}this.data=this._parseNode(a)}var o=1,u=2,a=3,f=4,l=5,c=6,h=7,p=8,d=9,v=10,m=11,g=12;y.inherit(Object,{data:null,_parseNode:function(e){var t=null;switch(e.tagName){case"dict":t=this._parseDict(e);break;case"array":t=this._parseArray(e);break;case"string":t=e.firstChild.nodeValue;break;case"false":t=!1;break;case"true":t=!0;break;case"real":t=parseFloat(e.firstChild.nodeValue);break;case"integer":t=parseInt(e.firstChild.nodeValue,10)}return t},_parseDict:function(e){var t={},n=null;for(var r=0,i=e.childNodes.length;r<i;r++){var s=e.childNodes[r];if(s.nodeType!=o)continue;s.tagName=="key"?n=s.firstChild.nodeValue:t[n]=this._parseNode(s)}return t},_parseArray:function(e){var t=[];for(var n=0,r=e.childNodes.length;n<r;n++){var i=e.childNodes[n];if(i.nodeType!=o)continue;t.push(this._parseNode(i))}return t}}),e.Plist=y},mimetype:"application/javascript",remote:!1},t.resources["/libs/cocos2d/libs/uri.js"]={data:function(e,t,n,r,i,s){var o={isURL:function(e){return/^(file|http|https):\/\//.test(e)}};r.exports=o},mimetype:"application/javascript",remote:!1},t.resources["/libs/cocos2d/libs/util.js"]={data:function(e,t,n,r,i,s){var o=t("path"),u={merge:function(e,t){var n={};for(var r=0;r<arguments.length;r++){var i=arguments[r];for(var s in i){if(!i.hasOwnProperty(s))continue;n[s]=i[s]}}return n},copy:function(e){if(e===null)return null;var t;if(e instanceof Array){t=[];for(var n=0,r=e.length;n<r;n++)t[n]=u.copy(e[n])}else if(typeof e=="object")if(typeof e.copy=="function")t=e.copy();else{t={};var i,s;for(s in e)t[s]=u.copy(e[s])}else t=e;return t},each:function(e,t){var n=0,r=e.length;for(n=0;n<r;n++)t(e[n],n);return e},map:function(e,t){var n=0,r=e.length,i=[];for(n=0;n<r;n++)i.push(t(e[n],n));return i},extend:function(e,t){if(arguments.length<2)throw"You must provide at least a target and 1 object to extend from";var n,r,i,s,o,u;for(n=1;n<arguments.length;n++){i=arguments[n];for(s in i){if(!i.hasOwnProperty(s))continue;u=Object.getOwnPropertyDescriptor(i,s);if(u.get||u.set){Object.defineProperty(e,s,u);continue}o=u.value;if(o===undefined||o===e)continue;o instanceof Function&&e[s]&&o!==e[s]&&(o.base=e[s],o._isProperty=o.base._isProperty);if(o instanceof Function){if(o._observing){e._observingFunctions?e._observingFunctions=e._observingFunctions.slice(0):e._observingFunctions=[];for(r=0;r<o._observing.length;r++)e._observingFunctions.push({property:o._observing[r],method:s})}o._isProperty&&(e._computedProperties?e._computedProperties=e._computedProperties.slice(0):e._computedProperties=[],e._computedProperties.push(s))}u.value=o,Object.defineProperty(e,s,u)}}return e},callback:function(e,t){console.warn("cocos.util.callback is deprecated. Use the built-in Function.bind instead");if(typeof t=="string"){var n=t;t=e[t];if(!t)throw"Callback to undefined method: "+n}if(!t)throw"Callback with no method to call";return function(){t.apply(e,arguments)}},domReady:function(){if(this._isReady)return;document.body||setTimeout(function(){u.domReady()},13),window.__isReady=!0;if(window.__readyList){var e,t=0;while(e=window.__readyList[t++])e.call(document);window.__readyList=null,delete window.__readyList}},bindReady:function(){if(window.__readyBound)return;window.__readyBound=!0;if(document.readyState==="complete")return u.domReady();document.addEventListener?window.addEventListener("load",u.domReady,!1):document.attachEvent&&window.attachEvent("onload",u.domReady)},ready:function(e){window.__isReady?e():(window.__readyList||(window.__readyList=[]),window.__readyList.push(e)),u.bindReady()},isArray:function(e){return e instanceof Array||e&&e!==Object.prototype&&u.isArray(e.__proto__)},isRegExp:function(e){var t=""+e;return e instanceof RegExp||typeof e=="function"&&e.constructor.name==="RegExp"&&e.compile&&e.test&&e.exec&&t.charAt(0)==="/"&&t.substr(-1)==="/"},isDate:function(e){if(e instanceof Date)return!0;if(typeof e!="object")return!1;var t=Date.prototype&&Object.getOwnPropertyNames(Date.prototype),n=e.__proto__&&Object.getOwnPropertyNames(e.__proto__);return JSON.stringify(n)===JSON.stringify(t)},populateIndex:function(e,t){var n={};return t=t.split(" "),u.each(t,function(t,r){u.extend(n,window.require("./"+t,e))}),u.extend(e.exports,n),n},requireAll:function(){var e=[].slice.call(arguments),t={},n=e.shift();return e.forEach(function(e){u.extend(t,window.require("./"+e,n))}),t},makeReadonly:function(e,t){t instanceof Array||(t=[t]);for(var n=0,r=t.length,i;n<r;n++)i=t[n],e["_"+i]=e[i],Object.defineProperty(e,i,{get:function(e){return this["_"+e]}.bind(e,i)})}};u.extend(String.prototype,{get w(){return this.split(" ")}}),r.exports=u},mimetype:"application/javascript",remote:!1},t.resources["/libs/cocos2d/nodes/AtlasNode.js"]={data:function(e,t,n,r,i,s){"use strict";function f(e){f.superclass.constructor.call(this,e),this.itemWidth=e.itemWidth,this.itemHeight=e.itemHeight,this.textureAtlas=new u({file:e.file,capacity:e.itemsToRender}),this._calculateMaxItems()}var o=t("./BatchNode").SpriteBatchNode,u=t("../TextureAtlas").TextureAtlas,a=t("geometry");f.inherit(o,{itemsPerRow:0,itemsPerColumn:0,itemWidth:0,itemHeight:0,textureAtlas:null,updateAtlasValues:function(){throw"cocos.nodes.AtlasNode:Abstract - updateAtlasValue not overriden"},_calculateMaxItems:function(){var e=this.textureAtlas.texture.contentSize;this.itemsPerColumn=e.height/this.itemHeight,this.itemsPerRow=e.width/this.itemWidth}}),e.AtlasNode=f},mimetype:"application/javascript",remote:!1},t.resources["/libs/cocos2d/nodes/BatchNode.js"]={data:function(t,n,r,i,s,o){"use strict";function d(e){d.superclass.constructor.call(this,e);var t=e.size||f.sizeMake(1,1);this.partialDraw=e.partialDraw,a.addPropertyListener(this,"contentSize","change",this._resizeCanvas.bind(this)),this._dirtyRects=[],this.contentRect=f.rectMake(0,0,t.width,t.height),this.renderTexture=new h(t),this.renderTexture.sprite.isRelativeAnchorPoint=!1,d.superclass.addChild.call(this,this.renderTexture)}function v(e){v.superclass.constructor.call(this,e);var t=e.file,n=e.url,r=e.textureAtlas,i=e.texture;if(n||t||i)this.ready=n?!1:!0,r=new c({url:n,file:t,texture:i}),this.ready||a.addListenerOnce(r,"load",function(){this.ready=!0}.bind(this));this.textureAtlas=r,a.addPropertyListener(this,"opacity","change",function(){for(var e=0,t=this.children.length;e<t;e++){var n=this.children[e];n.opacity=this.opacity}}.bind(this))}var u=n("util"),a=n("events"),f=n("geometry"),l=f.ccp,c=n("../TextureAtlas").TextureAtlas,h=n("./RenderTexture").RenderTexture,p=n("./Node").Node;d.inherit(p,{partialDraw:!1,contentRect:null,renderTexture:null,dirty:!0,dirtyRegion:null,dynamicResize:!1,_dirtyRects:null,addChild:function(e){d.superclass.addChild.call(this,e);var t,n;e instanceof p?t=e:(t=e.child,n=e.z),a.addListener(t,"drawdirty",function(e){e&&this.addDirtyRegion(e),this.addDirtyRegion(t.boundingBox)}.bind(this)),this.addDirtyRegion(t.boundingBox)},removeChild:function(e){d.superclass.removeChild.call(this,e),this.dirty=!0},addDirtyRegion:function(e){e=new f.Rect(Math.floor(e.origin.x)-1,Math.floor(e.origin.y)-1,Math.ceil(e.size.width)+2,Math.ceil(e.size.height)+2);var t=this.dirtyRegion;t?t=f.rectUnion(t,e):t=e,this.dirtyRegion=t,this.dirty=!0},_resizeCanvas:function(e){var t=this.contentSize;if(f.sizeEqualToSize(t,e))return;this.renderTexture.contentSize=t,this.dirty=!0},update:function(){},visit:function(t){if(!this.visible)return;t.save(),this.transform(t);var r=this.dirtyRegion;if(this.dirty){if(r){if(this.partialDraw){var i=n("../Director").Director.sharedDirector.winSize,s=this.position,o=new f.Rect(0,0,i.width,i.height);o=f.rectApplyAffineTransform(o,this.worldToNodeTransform()),r=f.rectIntersection(o,r)}this.renderTexture.clear(r),this.renderTexture.context.save(),this.renderTexture.context.beginPath(),this.renderTexture.context.rect(r.origin.x,r.origin.y,r.size.width,r.size.height),this.renderTexture.context.clip(),this.renderTexture.context.closePath()}else this.renderTexture.clear();for(var u=0,a=this.children.length;u<a;u++){var l=this.children[u];if(l==this.renderTexture)continue;(!r||f.rectOverlapsRect(l.boundingBox,r))&&l.visit(this.renderTexture.context,r)}e.SHOW_REDRAW_REGIONS&&r&&(this.renderTexture.context.beginPath(),this.renderTexture.context.rect(r.origin.x,r.origin.y,r.size.width,r.size.height),this.renderTexture.context.fillStyle="rgba(0, 0, 255, 0.5)",this.renderTexture.context.fill(),this.renderTexture.context.closePath()),r&&this.renderTexture.context.restore(),this.dirty=!1,this.dirtyRegion=null}this.renderTexture.visit(t),t.restore()},draw:function(e){},onEnter:function(){d.superclass.onEnter.call(this),this.partialDraw&&a.addPropertyListener(this.parent,"isTransformDirty","change",function(){var e=this.visibleRect;this.addDirtyRegion(e)}.bind(this))}}),v.inherit(d,{textureAtlas:null,get texture(){return this.textureAtlas?this.textureAtlas.texture:null}}),t.BatchNode=d,t.SpriteBatchNode=v},mimetype:"application/javascript",remote:!1},t.resources["/libs/cocos2d/nodes/index.js"]={data:function(e,t,n,r,i,s){"use strict";var o=t("util"),u=t("path"),a="AtlasNode LabelAtlas ProgressBar PreloadScene Node Layer Scene Label Sprite TMXTiledMap BatchNode RenderTexture Menu MenuItem Transition".split(" "),f={};o.each(a,function(e,n){o.extend(f,t("./"+e))}),r.exports=f},mimetype:"application/javascript",remote:!1},t.resources["/libs/cocos2d/nodes/Label.js"]={data:function(t,n,r,i,s,o){"use strict";function h(e){h.superclass.constructor.call(this,e),this.anchorPoint=c(.5,.5),"fontSize fontName fontColor string".w.forEach(function(t){e[t]&&(this[t]=e[t])}.bind(this)),this._updateLabelContentSize()}var u=n("util"),a=n("system").console,f=n("../Director").Director,l=n("./Node").Node,c=n("geometry").ccp;h.inherit(l,{string:"",fontName:"Helvetica",fontSize:16,fontColor:"white",get font(){return this.fontSize+"px __cc2d_"+this.fontName+","+this.fontName},draw:function(t){e.FLIP_Y_AXIS&&(t.save(),t.scale(1,-1),t.translate(0,-this.fontSize)),t.fillStyle=this.fontColor,t.font=this.font,t.textBaseline="top",t.fillText?t.fillText(this.string,0,0):t.mozDrawText&&t.mozDrawText(this.string),e.FLIP_Y_AXIS&&t.restore()},_updateLabelContentSize:function(){var e=f.sharedDirector.context,t={width:0,height:this.fontSize},n=e.font;e.font=this.font;if(e.measureText){var r=e.measureText(this.string);t.width=r.width}else e.mozMeasureText&&(t.width=e.mozMeasureText(this.string));e.font=n,this.contentSize=t}}),i.exports.Label=h},mimetype:"application/javascript",remote:!1},t.resources["/libs/cocos2d/nodes/LabelAtlas.js"]={data:function(e,t,n,r,i,s){"use strict";function l(e){l.superclass.constructor.call(this,{file:e.charMapFile,itemWidth:e.itemWidth,itemHeight:e.itemHeight,itemsToRender:e.string.length,size:new a.Size(e.itemWidth*e.string.length,e.itemHeight)}),f.addPropertyListener(this,"string","change",this.updateAtlasValue.bind(this)),this.mapStartChar=e.startCharMap.charCodeAt(0),this.string=e.string,this.contentSize=new a.Size(e.itemWidth*this.string.length,e.itemHeight)}var o=t("./AtlasNode").AtlasNode,u=t("./Sprite").Sprite,a=t("geometry"),f=t("events");l.inherit(o,{string:"",mapStartChar:"",updateAtlasValue:function(){var e=this.string.length,t=this.string;while(this.children.length>0)this.removeChild(this.children[0]);for(var n=0;n<e;n++){var r=t.charCodeAt(n)-this.mapStartChar,i=r%this.itemsPerRow,s=Math.floor(r/this.itemsPerRow),o=i*this.itemWidth,f=s*this.itemHeight,l=new u({rect:new a.Rect(o,f,this.itemWidth,this.itemHeight),textureAtlas:this.textureAtlas});l.position=new a.Point(n*this.itemWidth,0),l.anchorPoint=new a.Point(0,0),l.opacity=this.opacity,this.addChild({child:l})}}}),e.LabelAtlas=l},mimetype:"application/javascript",remote:!1},t.resources["/libs/cocos2d/nodes/Layer.js"]={data:function(e,t,n,r,i,s){"use strict";function p(){p.superclass.constructor.call(this);var e=l.sharedDirector.winSize;this.isRelativeAnchorPoint=!1,this.anchorPoint=a(.5,.5),this.contentSize=e,l.sharedDirector.isTouchScreen||(u.addPropertyListener(this,"isMouseEnabled","change",function(){this.isRunning&&(this.isMouseEnabled?c.sharedDispatcher.addMouseDelegate({delegate:this,priority:this.mouseDelegatePriority}):c.sharedDispatcher.removeMouseDelegate({delegate:this}))}.bind(this)),u.addPropertyListener(this,"isKeyboardEnabled","change",function(){this.isRunning&&(this.isKeyboardEnabled?c.sharedDispatcher.addKeyboardDelegate({delegate:this,priority:this.keyboardDelegatePriority}):c.sharedDispatcher.removeKeyboardDelegate({delegate:this}))}.bind(this)))}var o=t("util"),u=t("events"),a=t("geometry").ccp,f=t("./Node").Node,l=t("../Director").Director,c=t("../EventDispatcher").EventDispatcher,h=t("../TouchDispatcher").TouchDispatcher;p.inherit(f,{isMouseEnabled:!1,isKeyboardEnabled:!1,mouseDelegatePriority:0,keyboardDelegatePriority:0,get isTouchEnabled(){return this._isTouchEnabled},set isTouchEnabled(e){if(!l.sharedDirector.isTouchScreen)throw new Error("Only touch screen devices can listen for touch events");this._isTouchEnabled!=e&&(this._isTouchEnabled=e,this.isRunning&&(e?this.registerWithTouchDispatcher():h.sharedDispatcher.removeDelegate(this)))},_isTouchEnabled:!1,registerWithTouchDispatcher:function(){h.sharedDispatcher.addStandardDelegate(this,0)},onEnter:function(){l.sharedDirector.isTouchScreen?this._isTouchEnabled&&this.registerWithTouchDispatcher():(this.isMouseEnabled&&c.sharedDispatcher.addMouseDelegate({delegate:this,priority:this.mouseDelegatePriority}),this.isKeyboardEnabled&&c.sharedDispatcher.addKeyboardDelegate({delegate:this,priority:this.keyboardDelegatePriority})),p.superclass.onEnter.call(this)},onExit:function(){l.sharedDirector.isTouchScreen?h.sharedDispatcher.removeDelegate(this):(this.isMouseEnabled&&c.sharedDispatcher.removeMouseDelegate({delegate:this}),this.isKeyboardEnabled&&c.sharedDispatcher.removeKeyboardDelegate({delegate:this})),p.superclass.onExit.call(this)}}),r.exports.Layer=p},mimetype:"application/javascript",remote:!1},t.resources["/libs/cocos2d/nodes/Menu.js"]={data:function(e,t,n,r,i,s){"use strict";function m(e){m.superclass.constructor.call(this,e);var t=e.items;a.sharedDirector.isTouchScreen?this.isTouchEnabled=!0:this.isMouseEnabled=!0;var n=a.sharedDirector.winSize;this.isRelativeAnchorPoint=!1,this.anchorPoint=c(.5,.5),this.contentSize=n,this.position=c(n.width/2,n.height/2);if(t){var r=0;t.forEach(function(e){this.addChild({child:e,z:r++})}.bind(this))}}var o=t("util"),u=t("./Layer").Layer,a=t("../Director").Director,f=t("./MenuItem").MenuItem,l=t("geometry"),c=l.ccp,h=t("../TouchDispatcher").TouchDispatcher,p=0,d=1,v=-128;m.inherit(u,{mouseDelegatePriority:-Number.MAX_VALUE+1,state:p,selectedItem:null,color:null,addChild:function(e){if(!e.child instanceof f)throw"Menu only supports MenuItem objects as children";m.superclass.addChild.call(this,e)},registerWithTouchDispatcher:function(){h.sharedDispatcher.addTargetedDelegate(this,v,!0)},itemForTouch:function(e){var t=a.sharedDirector.convertTouchToCanvas(e.touch),n=this.children;for(var r=0,i=n.length;r<i;r++){var s=n[r];if(s.visible&&s.isEnabled){var o=s.convertToNodeSpace(t),u=s.rect;u.origin=c(0,0);if(l.rectContainsPoint(u,o))return s}}return null},touchBegan:function(e){if(this.state!=p||!this.visible)return!1;for(var t=this.parent;t;t=t.parent)if(!t.visible)return!1;var n=this.itemForTouch(e);return this.selectedItem=n,n?(n.selected(),this.state=d,!0):!1},touchEnded:function(e){var t=this.selectedItem;t&&(t.unselected(),t.activate()),this.state!=p&&(this.state=p)},touchCancelled:function(e){var t=this.selectedItem;t&&t.unselected(),this.state!=p&&(this.state=p)},touchMoved:function(e){var t=this.itemForTouch(e);t!=this.selectedItem&&(this.selectedItem&&this.selectedItem.unselected(),this.selectedItem=t,this.selectedItem&&this.selectedItem.selected())},itemForMouseEvent:function(e){var t=e.locationInCanvas,n=this.children;for(var r=0,i=n.length;r<i;r++){var s=n[r];if(s.visible&&s.isEnabled){var o=s.convertToNodeSpace(t),u=s.rect;u.origin=c(0,0);if(l.rectContainsPoint(u,o))return s}}return null},mouseUp:function(e){var t=this.selectedItem;return t&&(t.unselected(),t.activate()),this.state!=p&&(this.state=p),t?!0:!1},mouseDown:function(e){if(this.state!=p||!this.visible)return!1;var t=this.itemForMouseEvent(e);return this.selectedItem=t,t?(t.selected(),this.state=d,!0):!1},mouseDragged:function(e){var t=this.itemForMouseEvent(e);return t!=this.selectedItem&&(this.selectedItem&&this.selectedItem.unselected(),this.selectedItem=t,this.selectedItem&&this.selectedItem.selected()),t&&this.state==d?!0:!1}}),e.Menu=m},mimetype:"application/javascript",remote:!1},t.resources["/libs/cocos2d/nodes/MenuItem.js"]={data:function(e,t,n,r,i,s){"use strict";function c(e){c.superclass.constructor.call(this,e);var t=e.callback;this.anchorPoint=l(.5,.5),this.callback=t}function h(e){h.superclass.constructor.call(this,e);var t=e.normalImage,n=e.selectedImage,r=e.disabledImage;this.normalImage=t,this.selectedImage=n,this.disabledImage=r,this.contentSize=t.contentSize}function p(e){var t=e.normalImage,n=e.selectedImage,r=e.disabledImage,i=e.callback,s=new a({file:t}),o=new a({file:n}),u=null;r&&(u=new a({file:r})),p.superclass.constructor.call(this,{normalImage:s,selectedImage:o,disabledImage:u,callback:i})}var o=t("util"),u=t("./Node").Node,a=t("./Sprite").Sprite,f=t("geometry").rectMake,l=t("geometry").ccp;c.inherit(u,{_isEnabled:!0,isSelected:!1,callback:null,activate:function(){this.isEnabled&&this.callback&&this.callback(this)},get rect(){return f(this.position.x-this.contentSize.width*this.anchorPoint.x,this.position.y-this.contentSize.height*this.anchorPoint.y,this.contentSize.width,this.contentSize.height)},get isEnabled(){return this._isEnabled},set isEnabled(e){this._isEnabled=e},selected:function(){this.isSelected=!0},unselected:function(){this.isSelected=!1}}),h.inherit(c,{_normalImage:null,_selectedImage:null,_disabledImage:null,get normalImage(){return this._normalImage},set normalImage(e){e!=this.normalImage&&(e.anchorPoint=l(0,0),e.visible=!0,this.removeChild({child:this.normalImage,cleanup:!0}),this.addChild(e),this._normalImage=e)},get selectedImage(){return this._selectedImage},set selectedImage(e){e!=this.selectedImage&&(e.anchorPoint=l(0,0),e.visible=!1,this.removeChild({child:this.selectedImage,cleanup:!0}),this.addChild(e),this._selectedImage=e)},get disabledImage(){return this._disabledImage},set disabledImage(e){e!=this.disabledImage&&(e.anchorPoint=l(0,0),e.visible=!1,this.removeChild({child:this.disabledImage,cleanup:!0}),this.addChild(e),this._disabledImage=e)},selected:function(){h.superclass.selected.call(this),this.selectedImage?(this.normalImage.visible=!1,this.selectedImage.visible=!0,this.disabledImage&&(this.disabledImage.visible=!1)):(this.normalImage.visible=!0,this.disabledImage&&(this.disabledImage.visible=!1))},unselected:function(){h.superclass.unselected.call(this),this.normalImage.visible=!0,this.selectedImage&&(this.selectedImage.visible=!1),this.disabledImage&&(this.disabledImage.visible=!1)},get isEnabled(){return this._isEnabled},set isEnabled(e){this._isEnabled=e,e?(this.normalImage.visible=!0,this.selectedImage&&(this.selectedImage.visible=!1),this.disabledImage&&(this.disabledImage.visible=!1)):this.disabledImage?(this.normalImage.visible=!1,this.selectedImage&&(this.selectedImage.visible=!1),this.disabledImage.visible=!0):(this.normalImage.visible=!0,this.selectedImage&&(this.selectedImage.visible=!1))}}),p.inherit(h),e.MenuItem=c,e.MenuItemImage=p,e.MenuItemSprite=h},mimetype:"application/javascript",remote:!1},t.resources["/libs/cocos2d/nodes/Node.js"]={data:function(t,n,r,i,s,o){"use strict";function p(){this._contentSize=new f.Size(0,0),this._anchorPoint=l(0,0),this.anchorPointInPixels=l(0,0),this._position=l(0,0),this.children=[],a.addListener(this,"dirtytransform"
,this._dirtyTransform.bind(this))}var u=n("util"),a=n("events"),f=n("geometry"),l=f.ccp,c=n("../Scheduler").Scheduler,h=n("../ActionManager").ActionManager;p.inherit(Object,{get visible(){return this._visible},set visible(e){this._visible=e,this._dirtyDraw()},_visible:!0,get position(){return this._position},set position(e){this._position=e,a.trigger(this,"dirtytransform",{target:this,property:"position"})},_position:null,get ready(){return this._ready},set ready(e){this._ready=!!e,e&&a.trigger(this,"ready",{target:this})},_ready:!0,parent:null,tag:null,get contentSize(){return this._contentSize},set contentSize(e){this._contentSize=e,a.trigger(this,"dirtytransform",{target:this,property:"contentSize"}),this._updateAnchorPointInPixels()},_contentSize:null,zOrder:0,get anchorPoint(){return this._anchorPoint},set anchorPoint(e){this._anchorPoint=e,a.trigger(this,"dirtytransform",{target:this,property:"anchorPoint"}),this._updateAnchorPointInPixels()},anchorPointInPixels:null,get rotation(){return this._rotation},set rotation(e){this._rotation=e,a.trigger(this,"dirtytransform",{target:this,property:"rotation"})},_rotation:0,get scaleX(){return this._scaleX},set scaleX(e){this._scaleX=e,a.trigger(this,"dirtytransform",{target:this,property:"scaleX"})},_scaleX:1,get scaleY(){return this._scaleY},set scaleY(e){this._scaleY=e,a.trigger(this,"dirtytransform",{target:this,property:"scaleY"})},_scaleY:1,get opacity(){return this._opacity},set opacity(e){this._opacity=e,this._dirtyDraw()},_opacity:255,isRunning:!1,get isRelativeAnchorPoint(){return this._isRelativeAnchorPoint},set isRelativeAnchorPoint(e){this._isRelativeAnchorPoint=e,a.trigger(this,"dirtytransform",{target:this,property:"isRelativeAnchorPoint"})},_isRelativeAnchorPoint:!0,isTransformDirty:!0,isInverseDirty:!0,inverse:null,transformMatrix:null,children:null,_updateAnchorPointInPixels:function(){var e=this.anchorPoint,t=this.contentSize;this.anchorPointInPixels=l(t.width*e.x,t.height*e.y)},addChild:function(e){if(e instanceof p)return this.addChild({child:e});var t=e.child,n=e.z,r=e.tag,i=!1;if(n===undefined||n===null)n=t.zOrder;var s=this.children.length,o,u;for(o=0;o<s;o++){u=this.children[o];if(u.zOrder>n){i=!0,this.children.splice(o,0,t);break}}return i||this.children.push(t),t.tag=r,t.zOrder=n,t.parent=this,this.isRunning&&t.onEnter(),this},getChild:function(e){var t=e.tag;for(var n=0;n<this.children.length;n++)if(this.children[n].tag==t)return this.children[n];return null},removeChild:function(e){if(e instanceof p)return this.removeChild({child:e});var t=e.child,n=e.cleanup;if(!t)return;var r=this.children,i=r.indexOf(t);i>-1&&this._detachChild({child:t,cleanup:n})},removeChildren:function(e){var t=this.children,n=this.isRunning;for(var r=0;r<t.length;r++)e.cleanup&&t[r].cleanup(),n&&t[r].onExit(),t[r].parent=null;this.children=[]},_detachChild:function(e){var t=e.child,n=e.cleanup,r=this.children,i=this.isRunning,s=r.indexOf(t);i&&t.onExit(),n&&t.cleanup(),t.parent=null,r.splice(s,1)},reorderChild:function(e){var t=e.child,n=e.z,r=this.children.indexOf(t);if(r==-1)throw"Node isn't a child of this node";t.zOrder=n,this.children.splice(r,1);var i=!1,s=this.children.length,o,u;for(o=0;o<s;o++){u=this.children[o];if(u.zOrder>n){i=!0,this.children.splice(o,0,t);break}}i||this.children.push(t)},draw:function(e,t){},get scale(){if(this.scaleX!=this.scaleY)throw"scaleX and scaleY aren't identical";return this.scaleX},set scale(e){this.scaleX=e,this.scaleY=e},scheduleUpdate:function(e){e=e||{};var t=e.priority||0;c.sharedScheduler.scheduleUpdate({target:this,priority:t,paused:!this.isRunning})},unscheduleUpdate:function(){c.sharedScheduler.unscheduleUpdateForTarget(this)},onEnter:function(){this.children.forEach(function(e){e.onEnter()}),this.resumeSchedulerAndActions(),this.isRunning=!0},onExit:function(){this.pauseSchedulerAndActions(),this.isRunning=!1,this.children.forEach(function(e){e.onExit()})},cleanup:function(){this.stopAllActions(),this.unscheduleAllSelectors(),this.children.forEach(function(e){e.cleanup()})},resumeSchedulerAndActions:function(){c.sharedScheduler.resumeTarget(this),h.sharedManager.resumeTarget(this)},pauseSchedulerAndActions:function(){c.sharedScheduler.pauseTarget(this),h.sharedManager.pauseTarget(this)},unscheduleSelector:function(e){c.sharedScheduler.unschedule({target:this,method:e})},unscheduleAllSelectors:function(){c.sharedScheduler.unscheduleAllSelectorsForTarget(this)},stopAllActions:function(){h.sharedManager.removeAllActionsFromTarget(this)},visit:function(e,t){if(!this.visible)return;e.save(),this.transform(e),e.globalAlpha=this.opacity/255;if(t){var n=this.position;t=new f.Rect(t.origin.x-n.x,t.origin.y-n.y,t.size.width,t.size.height)}this.children.forEach(function(n,r){n.zOrder<0&&n.visit(e,t)}),this.draw(e,t),this.children.forEach(function(n,r){n.zOrder>=0&&n.visit(e,t)}),e.restore()},transform:function(t){this.isRelativeAnchorPoint&&(this.anchorPointInPixels.x!==0||this.anchorPointInPixels.y!==0)&&t.translate(Math.round(-this.anchorPointInPixels.x),Math.round(-this.anchorPointInPixels.y)),this.anchorPointInPixels.x!==0||this.anchorPointInPixels.y!==0?t.translate(Math.round(this.position.x+this.anchorPointInPixels.x),Math.round(this.position.y+this.anchorPointInPixels.y)):t.translate(Math.round(this.position.x),Math.round(this.position.y)),e.FLIP_Y_AXIS?t.rotate(-f.degreesToRadians(this.rotation)):t.rotate(f.degreesToRadians(this.rotation)),t.scale(this.scaleX,this.scaleY),(this.anchorPointInPixels.x!==0||this.anchorPointInPixels.y!==0)&&t.translate(Math.round(-this.anchorPointInPixels.x),Math.round(-this.anchorPointInPixels.y))},runAction:function(e){h.sharedManager.addAction({action:e,target:this,paused:this.isRunning})},getAction:function(e){return h.sharedManager.getActionFromTarget({target:this,tag:e.tag})},nodeToParentTransform:function(){if(this.isTransformDirty){this.transformMatrix=f.affineTransformIdentity(),!this.isRelativeAnchorPoint&&!f.pointEqualToPoint(this.anchorPointInPixels,l(0,0))&&(this.transformMatrix=f.affineTransformTranslate(this.transformMatrix,this.anchorPointInPixels.x,this.anchorPointInPixels.y)),f.pointEqualToPoint(this.position,l(0,0))||(this.transformMatrix=f.affineTransformTranslate(this.transformMatrix,this.position.x,this.position.y)),this.rotation!==0&&(this.transformMatrix=f.affineTransformRotate(this.transformMatrix,-f.degreesToRadians(this.rotation)));if(this.scaleX!=1||this.scaleY!=1)this.transformMatrix=f.affineTransformScale(this.transformMatrix,this.scaleX,this.scaleY);f.pointEqualToPoint(this.anchorPointInPixels,l(0,0))||(this.transformMatrix=f.affineTransformTranslate(this.transformMatrix,-this.anchorPointInPixels.x,-this.anchorPointInPixels.y)),this.isTransformDirty=!1}return this.transformMatrix},parentToNodeTransform:function(){},nodeToWorldTransform:function(){var e=this.nodeToParentTransform(),t;for(t=this.parent;t;t=t.parent)e=f.affineTransformConcat(e,t.nodeToParentTransform());return e},worldToNodeTransform:function(){return f.affineTransformInvert(this.nodeToWorldTransform())},convertToNodeSpace:function(e){return f.pointApplyAffineTransform(e,this.worldToNodeTransform())},get boundingBox(){return(this.isTransformDirty||!this._boundingBox)&&this._updateBoundingBox(),this._boundingBox},_updateBoundingBox:function(){var e=this.contentSize,t=new f.Rect(0,0,e.width,e.height);this._boundingBox=f.rectApplyAffineTransform(t,this.nodeToParentTransform())},get worldBoundingBox(){var e=this.contentSize,t=new f.Rect(0,0,e.width,e.height);return t=f.rectApplyAffineTransform(t,this.nodeToWorldTransform()),t},get visibleRect(){var e=n("../Director").Director.sharedDirector.winSize,t=new f.Rect(0,0,e.width,e.height);return f.rectApplyAffineTransform(t,this.worldToNodeTransform())},_dirtyTransform:function(){var e=this.boundingBox;this.isTransformDirty=!0,this._dirtyDraw(e),a.trigger(this,"transformdirty",e)},_dirtyDraw:function(e){a.trigger(this,"drawdirty",e instanceof f.Rect?e:void 0)},schedule:function(e){if(typeof e=="string")return this.schedule({method:e,interval:0});e.interval=e.interval||0,c.sharedScheduler.schedule({target:this,method:e.method,interval:e.interval,paused:this.isRunning})},unschedule:function(e){if(!e)return;typeof e=="string"&&(e=this[e]),c.sharedScheduler.unschedule({target:this,method:e})}}),i.exports.Node=p},mimetype:"application/javascript",remote:!1},t.resources["/libs/cocos2d/nodes/PreloadScene.js"]={data:function(e,t,n,r,i,s){"use strict";function v(e){v.superclass.constructor.call(this,e);var t=new l;this.preloader=t,d.addListener(t,"load",function(e,t){d.trigger(this,"load",e,t)}.bind(this)),d.addListener(t,"complete",function(e){d.trigger(this,"complete",e)}.bind(this))}var o=t("./Scene").Scene,u=t("../Director").Director,a=t("./Label").Label,f=t("./ProgressBar").ProgressBar,l=t("preloader").Preloader,c=t("remote_resources").RemoteResource,h=t("geometry"),p=t("util"),d=t("events");v.inherit(o,{preloader:null,isReady:!1,load:function(){this.isRunning&&(this.populateQueue(),this.preloader.load()),this.isReady=!0},populateQueue:function(){this.preloader.addEverythingToQueue()},onEnter:function(){v.superclass.onEnter.call(this),this.isReady&&this.preloader.load()}}),e.PreloadScene=v},mimetype:"application/javascript",remote:!1},t.resources["/libs/cocos2d/nodes/ProgressBar.js"]={data:function(e,t,n,r,i,s){"use strict";function c(e){c.superclass.constructor.call(this,e);var t=new a.Size(272,32);this.contentSize=t,this.anchorPoint=new a.Point(.5,.5);var n;e.emptyImage&&(n=new l({file:e.emptyImage,rect:new a.Rect(0,0,t.width,t.height)}),n.anchorPoint=new a.Point(0,0),this.emptySprite=n,this.addChild({child:n})),e.fullImage&&(n=new l({file:e.fullImage,rect:new a.Rect(0,0,0,t.height)}),n.anchorPoint=new a.Point(0,0),this.fullSprite=n,this.addChild({child:n})),f.addPropertyListener(this,"maxValue","change",this.updateImages.bind(this)),f.addPropertyListener(this,"value","change",this.updateImages.bind(this)),this.updateImages()}var o=t("./Node").Node,u=t("util"),a=t("geometry"),f=t("events"),l=t("./Sprite").Sprite;c.inherit(o,{emptySprite:null,fullSprite:null,maxValue:100,value:0,updateImages:function(){var e=this.emptySprite,t=this.fullSprite,n=this.value,r=this.contentSize,i=this.maxValue,s=n/i,o=Math.round(r.width*s);o===0?t.visible=!1:(t.visible=!0,t.rect=new a.Rect(0,0,o,r.height),t.contentSize=new a.Size(o,r.height)),r.width-o===0?e.visible=!1:(e.visible=!0,e.rect=new a.Rect(o,0,r.width-o,r.height),e.position=new a.Point(o,0),e.contentSize=new a.Size(r.width-o,r.height))}}),e.ProgressBar=c},mimetype:"application/javascript",remote:!1},t.resources["/libs/cocos2d/nodes/ProgressBarPreloadScene.js"]={data:function(e,t,n,r,i,s){"use strict";function v(e){v.superclass.constructor.call(this,e);var t=u.sharedDirector.winSize,n=new a({fontSize:14,fontName:"Helvetica",fontColor:"#ffffff",string:"Please wait..."});n.position=new h.Point(t.width/2,t.height/2+32),this.label=n,this.addChild({child:n});var r=new l([this.emptyImage,this.fullImage]);d.addListener(r,"complete",function(e){this.createProgressBar(),this.load()}.bind(this)),r.load()}var o=t("./PreloadScene").PreloadScene,u=t("../Director").Director,a=t("./Label").Label,f=t("./ProgressBar").ProgressBar,l=t("preloader").Preloader,c=t("remote_resources").RemoteResource,h=t("geometry"),p=t("util"),d=t("events");v.inherit(o,{progressBar:null,label:null,emptyImage:"/libs/cocos2d/resources/progress-bar-empty.png",fullImage:"/libs/cocos2d/resources/progress-bar-full.png",createProgressBar:function(){var e=this.preloader,t=u.sharedDirector.winSize,n=new f({emptyImage:"/libs/cocos2d/resources/progress-bar-empty.png",fullImage:"/libs/cocos2d/resources/progress-bar-full.png"});n.position=new h.Point(t.width/2,t.height/2),this.progressBar=n,this.addChild({child:n}),d.addListener(e,"load",function(e,t){n.maxValue=e.count,n.value=e.loaded})}}),e.ProgressBarPreloadScene=v},mimetype:"application/javascript",remote:!1},t.resources["/libs/cocos2d/nodes/RenderTexture.js"]={data:function(t,n,r,i,s,o){"use strict";function d(e){d.superclass.constructor.call(this,e);var t=e.width,n=e.height;a.addPropertyListener(this,"contentSize","change",this._resizeCanvas.bind(this)),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d");var r=new h({canvas:this.canvas});this.sprite=new c({textureAtlas:r,rect:{origin:p(0,0),size:{width:t,height:n}}}),this.contentSize=l.sizeMake(t,n),this.addChild(this.sprite),this.anchorPoint=p(0,0),this.sprite.anchorPoint=p(0,0)}var u=n("util"),a=n("events"),f=n("./Node").Node,l=n("geometry"),c=n("./Sprite").Sprite,h=n("../TextureAtlas").TextureAtlas,p=l.ccp;d.inherit(f,{canvas:null,context:null,sprite:null,_resizeCanvas:function(){var t=this.contentSize,n=this.canvas;n.width=t.width,n.height=t.height,e.FLIP_Y_AXIS&&(this.context.scale(1,-1),this.context.translate(0,-n.height));var r=this.sprite;r&&(r.textureRect={rect:l.rectMake(0,0,t.width,t.height)})},clear:function(t){t?this.context.clearRect(t.origin.x,t.origin.y,t.size.width,t.size.height):(this.canvas.width=this.canvas.width,e.FLIP_Y_AXIS&&(this.context.scale(1,-1),this.context.translate(0,-this.canvas.height)))}}),i.exports.RenderTexture=d},mimetype:"application/javascript",remote:!1},t.resources["/libs/cocos2d/nodes/Scene.js"]={data:function(e,t,n,r,i,s){"use strict";function f(){f.superclass.constructor.call(this);var e=u.sharedDirector.winSize;this.isRelativeAnchorPoint=!1,this.anchorPoint=new a.Point(.5,.5),this.contentSize=e}var o=t("./Node").Node,u=t("../Director").Director,a=t("geometry");f.inherit(o),r.exports.Scene=f},mimetype:"application/javascript",remote:!1},t.resources["/libs/cocos2d/nodes/Sprite.js"]={data:function(e,t,n,r,i,s){"use strict";function d(e){d.superclass.constructor.call(this,e),e=e||{};var t=e.file,n=e.url,r=e.textureAtlas,i=e.texture,s=e.frame,o=e.spritesheet,l=e.rect,p=e.frameName;this.anchorPoint=f(.5,.5),this.offsetPosition=f(0,0),this.unflippedOffsetPositionFromCenter=f(0,0),p&&(s=c.sharedSpriteFrameCache.getSpriteFrame(p)),s&&(i=s.texture,l=s.rect),u.addListener(this,"dirtytransform",this._updateQuad.bind(this)),u.addPropertyListener(this,"textureAtlas","change",this._updateTextureQuad.bind(this)),n||t||i?r=new h({url:n,file:t,texture:i}):o?(r=o.textureAtlas,this.useSpriteSheet=!0):!r,!l&&r&&(n?u.addListener(r,"load",function(){this.rect||(this.rect=new a.Rect(0,0,r.texture.size.width,r.texture.size.height))}.bind(this)):l=new a.Rect(0,0,r.texture.size.width,r.texture.size.height)),l&&(this.rect=l,this.contentSize=l.size,this.quad={drawRect:{origin:f(0,0),size:l.size},textureRect:l}),this.textureAtlas=r,s&&(this.displayFrame=s)}var o=t("util"),u=t("events"),a=t("geometry"),f=a.ccp,l=t("../Director").Director,c=t("../SpriteFrameCache").SpriteFrameCache,h=t("../TextureAtlas").TextureAtlas,p=t("./Node").Node;d.inherit(p,{textureAtlas:null,dirty:!0,recursiveDirty:!0,quad:null,flipX:!1,flipY:!1,offsetPosition:null,unflippedOffsetPositionFromCenter:null,untrimmedSize:null,get rect(){return this._rect},set rect(e){this._rect=e,this.quad||(this.quad={drawRect:{origin:f(0,0),size:this._rect.size},textureRect:this._rect});if(!this.contentSize||this.contentSize.width==0&&this.contentSize.height==0)this.contentSize=this._rect.size;u.trigger(this,"dirtytransform",{target:this,property:"rect"})},_rect:null,_updateTextureQuad:function(e,t,n,r){r&&r.removeQuad({quad:this.quad}),n&&n.insertQuad({quad:this.quad})},set textureCoords(e){var t=this.quad;t||(t={drawRect:a.rectMake(0,0,0,0),textureRect:a.rectMake(0,0,0,0)}),t.textureRect=o.copy(e),this.quad=t},set textureRect(e){var t=e.rect,n=!!e.rotated,r=e.untrimmedSize||t.size;this.contentSize=r,this.rect=o.copy(t),this.textureCoords=t;var i=this.quad,s=o.copy(this.unflippedOffsetPositionFromCenter);this.flipX&&(s.x=-s.x),this.flipY&&(s.y=-s.y);var u=o.copy(this.offsetPosition);u.x=s.x+(this.contentSize.width-t.size.width)/2,u.y=-s.y+(this.contentSize.height-t.size.height)/2,i.drawRect.origin=o.copy(u),i.drawRect.size=o.copy(t.size),this.flipX&&(i.drawRect.size.width*=-1,i.drawRect.origin.x=-t.size.width),this.flipY&&(i.drawRect.size.height*=-1,i.drawRect.origin.y=-t.size.height),this.quad=i},_updateQuad:function(){if(!this.rect)return;this.quad||(this.quad={drawRect:a.rectMake(0,0,0,0),textureRect:a.rectMake(0,0,0,0)});var e=o.copy(this.unflippedOffsetPositionFromCenter);this.flipX&&(e.x=-e.x),this.flipY&&(e.y=-e.y);var t=o.copy(this.offsetPosition);t.x=e.x+(this.contentSize.width-this.rect.size.width)/2,t.y=e.y+(this.contentSize.height-this.rect.size.height)/2,this.quad.textureRect=o.copy(this.rect),this.quad.drawRect.origin=o.copy(t),this.quad.drawRect.size=o.copy(this.rect.size),this.flipX&&(this.quad.drawRect.size.width*=-1,this.quad.drawRect.origin.x=-this.rect.size.width),this.flipY&&(this.quad.drawRect.size.height*=-1,this.quad.drawRect.origin.y=-this.rect.size.height)},updateTransform:function(e){if(!this.useSpriteSheet)throw"updateTransform is only valid when Sprite is being rendered using a SpriteSheet";if(!this.visible){this.dirty=!1,this.recursiveDirty=!1;return}this.quad.drawRect.origin=new a.Point(this.position.x-this.anchorPointInPixels.x*this.scaleX,this.position.y-this.anchorPointInPixels.y*this.scaleY),this.quad.drawRect.size=new a.Size(this.rect.size.width*this.scaleX,this.rect.size.height*this.scaleY),this.dirty=!1,this.recursiveDirty=!1},draw:function(e){if(!this.quad)return;this.textureAtlas.drawQuad(e,this.quad)},isFrameDisplayed:function(e){return!this.rect||!this.textureAtlas?!1:e.texture===this.textureAtlas.texture&&a.rectEqualToRect(e.rect,this.rect)},set displayFrame(e){if(!e){delete this.quad;return}this.unflippedOffsetPositionFromCenter=o.copy(e.offset);if(!this.textureAtlas||e.texture!==this.textureAtlas.texture)this.textureAtlas=new h({texture:e.texture});this.textureRect={rect:e.rect,rotated:e.rotated,untrimmedSize:e.originalSize}}}),r.exports.Sprite=d},mimetype:"application/javascript",remote:!1},t.resources["/libs/cocos2d/nodes/TMXLayer.js"]={data:function(t,n,r,i,s,o){"use strict";function E(e){var t=e.tilesetInfo,n=e.layerInfo,r=e.mapInfo,i=n.layerSize,s=i.width*i.height,o=null;t&&(o=t.sourceImage),a.isURL(o)?E.superclass.constructor.call(this,{url:o}):E.superclass.constructor.call(this,{file:o}),this.anchorPoint=m(0,0),this.layerName=n.name,this.layerSize=n.layerSize,this.tiles=n.tiles,this.minGID=n.minGID,this.maxGID=n.maxGID,this.opacity=n.opacity,this.properties=u.copy(n.properties),this.tileset=t,this.mapTileSize=r.tileSize,this.layerOrientation=r.orientation;var f=this.calculateLayerOffset(n.offset);this.position=f,this.contentSize=new v.Size(this.layerSize.width*this.mapTileSize.width,this.layerSize.height*this.mapTileSize.height+this.tileset.tileSize.height)}var u=n("util"),a=n("uri"),f=n("events"),l=n("./BatchNode").SpriteBatchNode,c=n("./Sprite").Sprite,h=n("../TMXOrientation").TMXOrientationOrtho,p=n("../TMXOrientation").TMXOrientationHex,d=n("../TMXOrientation").TMXOrientationIso,v=n("geometry"),m=v.ccp,g=n("./Node").Node,y=2147483648,b=1073741824,w=536870912;E.inherit(l,{layerSize:null,layerName:"",tiles:null,tilset:null,layerOrientation:0,mapTileSize:null,properties:null,calculateLayerOffset:function(e){var t=m(0,0);switch(this.layerOrientation){case h:t=m(e.x*this.mapTileSize.width,e.y*this.mapTileSize.height);break;case d:break;case p:}return t},setupTiles:function(){if(!this.ready){f.addListenerOnce(this,"ready",this.setupTiles.bind(this));return}this.tileset.imageSize=this.texture.contentSize,this.parseInternalProperties();for(var e=0;e<this.layerSize.height;e++)for(var t=0;t<this.layerSize.width;t++){var n=t+this.layerSize.width*e,r=this.tiles[n],i=r&y,s=r&b,o=r&w;r&=~(y|b|w),r!==0&&(this.appendTile({gid:r,position:new v.Point(t,e),flipH:i,flipV:s,flipD:o}),this.minGID=Math.min(r,this.minGID),this.maxGID=Math.max(r,this.maxGID))}},propertyNamed:function(e){return this.properties[e]},parseInternalProperties:function(){var e=this.properties.cc_vertexz;e&&(e==="automatic"?this._useAutomaticVertexZ=!0:this._vertexZvalue=parseInt(e,10))},appendTile:function(e){var t=e.gid,n=e.position,r=n.x+n.y*this.layerSize.width,i=this.tileset.rectForGID(t),s=new c({rect:i,textureAtlas:this.textureAtlas});s.position=this.positionAt(n),s.opacity=this.opacity;var o=0,u=0;return e.flipH&&(s.scaleX=-1,o=1),e.flipV&&(s.scaleY=-1,u=1),e.flipD&&console.warn("Diagonal flipped tiles are unsupported"),s.anchorPoint=new v.Point(o,u),this.addChild({child:s,z:this.vertexZForPos(n),tag:r}),s},positionAt:function(e){switch(this.layerOrientation){case h:return this.positionForOrthoAt(e);case d:return this.positionForIsoAt(e);default:return m(0,0)}},vertexZForPos:function(e){var t=0;if(!this._useAutomaticVertexZ)return this._vertexZvalue;switch(this.layerOrientation){case d:return t=this.layerSize.width+this.layerSize.height,-(t-(e.x+e.y));case h:return-(this.layerSize.height-e.y);case CCTMXOrientationHex:throw new Error("TMX Hexa zOrder not supported");default:throw new Error("TMX invalid value")}},positionForOrthoAt:function(t){var n=this.mapTileSize.height-this.tileset.tileSize.height,r=Math.floor(t.x*this.mapTileSize.width+.49),i;return e.FLIP_Y_AXIS?i=Math.floor((this.layerSize.height-t.y-1)*this.mapTileSize.height+.49):i=Math.floor(t.y*this.mapTileSize.height+.49)+n,m(r,i)},positionForIsoAt:function(t){var n=this.mapTileSize,r=this.layerSize;if(e.FLIP_Y_AXIS)return m(n.width/2*(r.width+t.x-t.y-1),n.height/2*(r.height*2-t.x-t.y-2));throw"Isometric tiles without cc.FLIP_Y_AXIS is currently unsupported"},tileAt:function(e){var t=this.layerSize,n=this.tiles;if(e.x<0||e.y<0||e.x>=t.width||e.y>=t.height)throw"TMX Layer: Invalid position";var r,i=this.tileGIDAt(e);if(i){var s=e.x+e.y*t.width;r=this.getChild({tag:s})}return r},tileGID:function(e){var t=this.layerSize.width,n=e.x+e.y*t;return this.tiles[n]},tileGIDAt:function(e){return this.tileGID(e)},removeTile:function(e){var t=this.tileGID(e);if(t===0)return;var n=this.tiles,r=this.layerSize.width,i=e.x+e.y*r;n[i]=0;var s=this.getChild({tag:i});s&&this.removeChild({child:s})}}),t.TMXLayer=E},mimetype:"application/javascript",remote:!1},t.resources["/libs/cocos2d/nodes/TMXTiledMap.js"]={data:function(e,t,n,r,i,s){"use strict";function v(e){v.superclass.constructor.call(this,e),this.anchorPoint=a(0,0);var t,n=function(){this.mapSize=t.mapSize,this.tileSize=t.tileSize,this.mapOrientation=t.orientation,this.objectGroups=t.objectGroups,this.properties=t.properties,this.tileProperties=t.tileProperties;var e=0;t.layers.forEach(function(n){if(n.visible){var r=this.parseLayer({layerInfo:n,mapInfo:t});this.addChild({child:r,z:e,tag:e});var i=r.contentSize,s=this.contentSize;s.width=Math.max(s.width,i.width),s.height=Math.max(s.height,i.height),this.contentSize=s,e++}}.bind(this))}.bind(this);if(e.file)t=new d({file:e.file}),n();else if(e.url){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(r.readyState==4){var i=e.url;/^\/\//.test(i)?i=window.location.protocol+i:/^\//.test(i)?i=window.location.protocol+"//"+window.location.hostname+i:i=window.location.href.replace(/\/[^\/]*$/,"/")+i,t=new d({filename:i,xml:r.responseText}),n()}},r.open("GET",e.url,!0),r.send(null)}else e.xml&&(t=new d({xml:e.xml}),n())}var o=t("util"),u=t("geometry"),a=u.ccp,f=t("./Node").Node,l=t("../TMXOrientation").TMXOrientationOrtho,c=t("../TMXOrientation").TMXOrientationHex,h=t("../TMXOrientation").TMXOrientationIso,p=t("./TMXLayer").TMXLayer,d=t("../TMXXMLParser").TMXMapInfo;v.inherit(f,{mapSize:null,tileSize:null,mapOrientation:0,objectGroups:null,properties:null,tileProperties:null,parseLayer:function(e){var t=this.tilesetForLayer(e),n=new p({tilesetInfo:t,layerInfo:e.layerInfo,mapInfo:e.mapInfo});return n.setupTiles(),n},tilesetForLayer:function(e){var t=e.layerInfo,n=e.mapInfo,r=t.layerSize,i;for(var s=n.tilesets.length-1;s>=0;s--){i=n.tilesets[s];for(var o=0;o<r.height;o++)for(var u=0;u<r.width;u++){var a=u+r.width*o,f=t.tiles[a];if(f!==0&&f>=i.firstGID)return i}}return i},getLayer:function(e){var t=e.name,n=null;this.children.forEach(function(e){e instanceof p&&e.layerName==t&&(n=e)});if(n!==null)return n},getObjectGroup:function(e){var t=e.name,n=null;this.objectGroups.forEach(function(e){e.name==t&&(n=e)});if(n!==null)return n},objectGroupNamed:function(e){return console.warn("TMXTiledMap#objectGroupNamed is deprected. Use TMXTiledMap#getObjectGroup instread"),this.getObjectGroup(e)}}),e.TMXTiledMap=v},mimetype:"application/javascript",remote:!1},t.resources["/libs/cocos2d/nodes/Transition.js"]={data:function(e,t,n,r,i,s){"use strict";function d(e){d.superclass.constructor.call(this,e),this.duration=e.duration;if(!e.scene)throw"TransitionScene requires scene property";this.inScene=e.scene,this.outScene=l.sharedDirector._runningScene;if(this.inScene==this.outScene)throw"Incoming scene must be different from the outgoing scene";c.sharedDispatcher.dispatchEvents=!1,this.sceneOrder()}function v(e){v.superclass.constructor.call(this,e)}function m(e){m.superclass.constructor.call(this,e)}function g(e){g.superclass.constructor.call(this,e)}function y(e){y.superclass.constructor.call(this,e)}function b(e){b.superclass.constructor.call(this,e)}function w(e){w.superclass.constructor.call(this,e)}function E(e){E.superclass.constructor.call(this,e)}function S(e){S.superclass.constructor.call(this,e)}function x(e){x.superclass.constructor.call(this,e)}var o=t("geometry"),u=t("util"),a=t("../actions"),f=t("./Scene").Scene,l=t("../Director").Director,c=t("../EventDispatcher").EventDispatcher,h=t("../Scheduler").Scheduler,p={kOrientationLeftOver:0,kOrientationRightOver:1,kOrientationUpOver:0,kOrientationDownOver:1};d.inherit(f,{inScene:null,outScene:null,duration:null,inSceneOnTop:null,sendCleanupToScene:null,finish:function(){var e=this.inScene,t=this.outScene;e.visible=!0,e.position=o.PointZero(),e.scale=1,e.rotation=0,t.visible=!1,t.position=o.PointZero(),t.scale=1,t.rotation=0,h.sharedScheduler.schedule({target:this,method:this.setNewScene,interval:0})},hideOutShowIn:function(){this.inScene.visible=!0,this.outScene.visible=!1},setNewScene:function(e){var t=l.sharedDirector;this.unscheduleSelector(this.setNewScene),this.sendCleanupToScene=t._sendCleanupToScene,t.replaceScene(this.inScene),c.sharedDispatcher.dispatchEvents=!0,this.outScene.visible=!0},sceneOrder:function(){this.inSceneOnTop=!0},draw:function(e,t){this.inSceneOnTop?(this.outScene.visit(e,t),this.inScene.visit(e,t)):(this.inScene.visit(e,t),this.outScene.visit(e,t))},onEnter:function(){d.superclass.onEnter.call(this),this.inScene.onEnter()},onExit:function(){d.superclass.onExit.call(this),this.outScene.onExit(),this.inScene.hasOwnProperty("onEnterTransitionDidFinish")&&this.inScene.onEnterTransitionDidFinish()},cleanup:function(){d.superclass.cleanup.call(this),this.sendCleanupToScene&&this.outScene.cleanup()}}),v.inherit(d,{onEnter:function(){v.superclass.onEnter.call(this);var e=this.duration;this.inScene.scale=.001,this.outScene.scale=1,this.inScene.anchorPoint=o.ccp(.5,.5),this.outScene.anchorPoint=o.ccp(.5,.5);var t=[new a.Spawn({actions:[new a.ScaleBy({scale:.001,duration:e/2}),new a.RotateBy({angle:720,duration:e/2})]}),new a.DelayTime({duration:e/2})],n=[new a.DelayTime({duration:e/2}),new a.Spawn({actions:[new a.ScaleTo({scale:1,duration:e/2}),new a.RotateBy({angle:-720,duration:e/2})]}),new a.CallFunc({target:this,method:this.finish})];this.outScene.runAction(new a.Sequence({actions:t})),this.inScene.runAction(new a.Sequence({actions:n}))}}),m.inherit(d,{onEnter:function(){m.superclass.onEnter.call(this),this.initScenes(),this.inScene.runAction(new a.Sequence({actions:[this.action(),new a.CallFunc({target:this,method:this.finish})]}))},action:function(){return new a.MoveTo({position:o.ccp(0,0),duration:this.duration})},initScenes:function(){var e=l.sharedDirector.winSize;this.inScene.position=o.ccp(-e.width,0)}}),g.inherit(m,{initScenes:function(){var e=l.sharedDirector.winSize;this.inScene.position=o.ccp(e.width,0)}}),y.inherit(m,{initScenes:function(){var e=l.sharedDirector.winSize;this.inScene.position=o.ccp(0,e.height)}}),b.inherit(m,{initScenes:function(){var e=l.sharedDirector.winSize;this.inScene.position=o.ccp(0,-e.height)}}),w.inherit(d,{onEnter:function(){w.superclass.onEnter.call(this),this.initScenes();var e=this.action(),t=this.action(),n=new a.Sequence({actions:[t,new a.CallFunc({target:this,method:this.finish})]});this.inScene.runAction(e),this.outScene.runAction(n)},sceneOrder:function(){this.inSceneOnTop=!1},initScenes:function(){var e=l.sharedDirector.winSize;this.inScene.position=o.ccp(-e.width,0)},action:function(){var e=l.sharedDirector.winSize;return new a.MoveBy({position:o.ccp(e.width,0),duration:this.duration})}}),E.inherit(w,{sceneOrder:function(){this.inSceneOnTop=!0},initScenes:function(){var e=l.sharedDirector.winSize;this.inScene.position=o.ccp(e.width,0)},action:function(){var e=l.sharedDirector.winSize;return new a.MoveBy({position:o.ccp(-e.width,0),duration:this.duration})}}),S.inherit(w,{sceneOrder:function(){this.inSceneOnTop=!1},initScenes:function(){var e=l.sharedDirector.winSize;this.inScene.position=o.ccp(0,e.height)},action:function(){var e=l.sharedDirector.winSize;return new a.MoveBy({position:o.ccp(0,-e.height),duration:this.duration})}}),x.inherit(w,{sceneOrder:function(){this.inSceneOnTop=!0},initScenes:function(){var e=l.sharedDirector.winSize;this.inScene.position=o.ccp(0,-e.height)},action:function(){var e=l.sharedDirector.winSize;return new a.MoveBy({position:o.ccp(0,e.height),duration:this.duration})}}),e.TransitionScene=d,e.TransitionRotoZoom=v,e.TransitionMoveInL=m,e.TransitionMoveInR=g,e.TransitionMoveInT=y,e.TransitionMoveInB=b,e.TransitionSlideInL=w,e.TransitionSlideInR=E,e.TransitionSlideInT=S,e.TransitionSlideInB=x},mimetype:"application/javascript",remote:!1},t.resources["/libs/cocos2d/remote_resources_patch.js"]={data:function(e,t,n,r,i,s){var o=t("remote_resources"),u=t("./RemoteFont").RemoteFont,a=o.getRemoteResourceConstructor;o.getRemoteResourceConstructor=function(e){var t;return/\bfont\b/.test(e)?t=u:t=a(e),t}},mimetype:"application/javascript",remote:!1},t.resources["/libs/cocos2d/RemoteFont.js"]={data:function(e,n,r,i,s,o){function c(e,t){var n=16;f||(f=e.document.createElement("canvas"),f.width=n,f.height=n,f.style.display="none",l=f.getContext("2d"),e.document.body.appendChild(f)),f.width=n,l.fillStyle="rgba(0, 0, 0, 0)",l.fillRect(0,0,n,n),l.font=n+"px __cc2d_"+t,l.fillStyle="rgba(255, 255, 255, 1)",l.fillText("M",0,n);var r=l.getImageData(0,0,n,n).data;for(var i=0;i<n*n;i++)if(r[i*4]!=0)return f.parentNode.removeChild(f),f=null,!0;return!1}function h(e,t){a.RemoteResource.apply(this,arguments)}var u=n("events"),a=n("remote_resources"),f,l;h.prototype=Object.create(a.RemoteResource.prototype),h.prototype.load=function(){var e=n("./Director").Director.sharedDirector.window,r=this.path.split("/").pop().split(".")[0],i="@font-face {                         font-family: '__cc2d_"+r+"';                         src: url("+this.url+");                     }",s=document.createElement("style");s.appendChild(document.createTextNode(i)),e.document.body.appendChild(s);var o=setInterval(function(){c(e,r)&&(t.resources[this.path].loaded=!0,u.trigger(this,"load",this),clearInterval(o))}.bind(this),100)},e.RemoteFont=h},mimetype:"application/javascript",remote:!1},t.resources["/libs/cocos2d/resources/progress-bar-empty.png"]={data:t.assetURL+"/libs/cocos2d/resources/progress-bar-empty.png",mimetype:"image/png",remote:!0},t.resources["/libs/cocos2d/resources/progress-bar-full.png"]={data:t.assetURL+"/libs/cocos2d/resources/progress-bar-full.png",mimetype:"image/png",remote:!0},t.resources["/libs/cocos2d/Scheduler.js"]={data:function(e,t,n,r,i,s){"use strict";function u(){this.timers=[],this.timerIndex=0,this.currentTimer=null,this.currentTimerSalvaged=!1,this.paused=!1}function a(){this.timers=[],this.timerIndex=0,this.currentTimer=null,this.currentTimerSalvaged=!1,this.paused=!1}function f(e){this.callback=e.callback,this.interval=e.interval||0,this.elapsed=-1}function l(){this.updates0=[],this.updatesNeg=[],this.updatesPos=[],this.hashForUpdates={},this.hashForMethods={}}var o=t("util");f.inherit(Object,{callback:null,interval:0,elapsed:-1,update:function(e){this.elapsed==-1?this.elapsed=0:this.elapsed+=e,this.elapsed>=this.interval&&(this.callback(this.elapsed),this.elapsed=0)}}),l.inherit(Object,{updates0:null,updatesNeg:null,updatesPos:null,hashForUpdates:null,hashForMethods:null,timeScale:1,schedule:function(e){var t=e.target,n=typeof e.method=="function"?e.method:t[e.method],r=e.interval,i=e.paused||!1,s=this.hashForMethods[t.id];if(!s)s=new a,this.hashForMethods[t.id]=s,s.target=t,s.paused=i;else if(s.paused!=i)throw"cocos.Scheduler. Trying to schedule a method with a pause value different than the target"
;var o=new f({callback:n.bind(t),interval:r});s.timers.push(o)},scheduleUpdate:function(e){var t=e.target,n=e.priority,r=e.paused,i,s,o={target:t,priority:n,paused:r},u=!1;if(n===0)this.updates0.push(o);else if(n<0){for(i=0,s=this.updatesNeg.length;i<s;i++)if(n<this.updatesNeg[i].priority){this.updatesNeg.splice(i,0,o),u=!0;break}u||this.updatesNeg.push(o)}else{for(i=0,s=this.updatesPos.length;i<s;i++)if(n<this.updatesPos[i].priority){this.updatesPos.splice(i,0,o),u=!0;break}u||this.updatesPos.push(o)}this.hashForUpdates[t.id]=o},tick:function(e){var t,n,r;this.timeScale!=1&&(e*=this.timeScale);var i;for(t=0,n=this.updatesNeg.length;t<n;t++)i=this.updatesNeg[t],i&&!i.paused&&i.target.update(e);for(t=0,n=this.updates0.length;t<n;t++)i=this.updates0[t],i&&!i.paused&&i.target.update(e);for(t=0,n=this.updatesPos.length;t<n;t++)i=this.updatesPos[t],i&&!i.paused&&i.target.update(e);for(r in this.hashForMethods)if(this.hashForMethods.hasOwnProperty(r)){i=this.hashForMethods[r];if(i)for(t=0,n=i.timers.length;t<n;t++){var s=i.timers[t];s&&s.update(e)}}},unschedule:function(e){if(!e.target||!e.method)return;var t=e.target,n=typeof e.method=="function"?e.method:t[e.method],r=this.hashForMethods[e.target.id];if(r)for(var i=0;i<r.timers.length;i++)if(r.timers[i].callback==n.bind(t)){var s=r.timers.splice(i,1);s=null}},unscheduleUpdateForTarget:function(e){if(!e)return;var t=e.id,n=this.hashForUpdates[t];n&&(n.priority===0?this.updates0.splice(this.updates0.indexOf(n),1):n.priority<0?this.updatesNeg.splice(this.updatesNeg.indexOf(n),1):this.updatesPos.splice(this.updatesPos.indexOf(n),1)),this.hashForUpdates[t]=null},unscheduleAllSelectors:function(){var e,t,n;for(t in this.hashForMethods)this.hashForMethods.hasOwnProperty(t)&&(n=this.hashForMethods[t],this.unscheduleAllSelectorsForTarget(n.target));for(e=0,len=this.updatesNeg.length;e<len;e++)n=this.updatesNeg[e],n&&this.unscheduleUpdateForTarget(n.target);for(e=0,len=this.updates0.length;e<len;e++)n=this.updates0[e],n&&this.unscheduleUpdateForTarget(n.target);for(e=0,len=this.updatesPos.length;e<len;e++)n=this.updatesPos[e],n&&this.unscheduleUpdateForTarget(n.target)},unscheduleAllSelectorsForTarget:function(e){if(!e)return;var t=this.hashForMethods[e.id];t&&(t.paused=!0,t.timers=[]),this.hashForMethods[e.id]=null,this.unscheduleUpdateForTarget(e)},pauseTarget:function(e){var t=this.hashForMethods[e.id];t&&(t.paused=!0);var n=this.hashForUpdates[e.id];n&&(n.paused=!0)},resumeTarget:function(e){var t=this.hashForMethods[e.id];t&&(t.paused=!1);var n=this.hashForUpdates[e.id];n&&(n.paused=!1)}}),Object.defineProperty(l,"sharedScheduler",{get:function(){return l._instance||(l._instance=new this),l._instance},enumerable:!0}),e.Timer=f,e.Scheduler=l},mimetype:"application/javascript",remote:!1},t.resources["/libs/cocos2d/SpriteFrame.js"]={data:function(e,t,n,r,i,s){"use strict";function f(e){f.superclass.constructor.call(this,e),this.texture=e.texture,this.rect=e.rect,this.rotated=!!e.rotate,this.offset=e.offset||a(0,0),this.originalSize=e.originalSize||o.copy(this.rect.size)}var o=t("util"),u=t("geometry"),a=u.ccp;f.inherit(Object,{rect:null,rotated:!1,offset:null,originalSize:null,texture:null,toString:function(){return"[object SpriteFrame | TextureName="+this.texture.name+", Rect = ("+this.rect.origin.x+", "+this.rect.origin.y+", "+this.rect.size.width+", "+this.rect.size.height+")]"},copy:function(){return new f({rect:this.rect,rotated:this.rotated,offset:this.offset,originalSize:this.originalSize,texture:this.texture})}}),e.SpriteFrame=f},mimetype:"application/javascript",remote:!1},t.resources["/libs/cocos2d/SpriteFrameCache.js"]={data:function(t,n,r,i,s,o){"use strict";function h(){h.superclass.constructor.call(this),this.spriteFrames={},this.spriteFrameAliases={}}var u=n("util"),a=n("geometry"),f=n("Plist").Plist,l=n("./SpriteFrame").SpriteFrame,c=n("./Texture2D").Texture2D;h.inherit(Object,{spriteFrames:null,spriteFrameAliases:null,addSpriteFrames:function(t){var n=t.file,r=new f({file:n}),i=r.data,s=i.metadata,o=i.frames,u=0,h=null;s&&(u=s.format,h=s.textureFileName),h||(h=n.replace(/\.plist$/i,".png"));var p=new c({file:h});for(var d in o)if(o.hasOwnProperty(d)){var v=o[d],m=null;switch(u){case 0:var g=v.x,y=v.y,b=v.width,w=v.height,E=v.offsetX,S=v.offsetY,x=v.originalWidth,T=v.originalHeight;!x||!T,e.FLIP_Y_AXIS&&(S*=-1),x=Math.abs(x),T=Math.abs(T),m=new l({texture:p,rect:a.rectMake(g,y,b,w),rotate:!1,offset:a.ccp(E,S),originalSize:a.sizeMake(x,T)});break;case 1:case 2:var N=a.rectFromString(v.frame),C=!!v.rotated,k=a.pointFromString(v.offset),L=a.sizeFromString(v.sourceSize);e.FLIP_Y_AXIS&&(k.y*=-1),m=new l({texture:p,rect:N,rotate:C,offset:k,originalSize:L});break;case 3:var A=a.sizeFromString(v.spriteSize),O=a.pointFromString(v.spriteOffset),M=a.sizeFromString(v.spriteSourceSize),_=a.rectFromString(v.textureRect),D=v.textureRotated;e.FLIP_Y_AXIS&&(O.y*=-1);var P=v.aliases;for(var H=0,B=P.length;H<B;H++){var j=P[H];this.spriteFrameAliases[d]=j}m=new l({texture:p,rect:a.rectMake(_.origin.x,_.origin.y,A.width,A.height),rotate:D,offset:O,originalSize:M});break;default:throw"Unsupported Zwoptex format: "+u}this.spriteFrames[d]=m}},getSpriteFrame:function(e){var t=e.name||e,n=this.spriteFrames[t];if(!n){var r=this.spriteFrameAliases[t];r&&(n=this.spriteFrames[r]);if(!n)throw"Unable to find frame: "+t}return n}}),Object.defineProperty(h,"sharedSpriteFrameCache",{get:function(){return h._instance||(h._instance=new this),h._instance},enumerable:!0}),t.SpriteFrameCache=h},mimetype:"application/javascript",remote:!1},t.resources["/libs/cocos2d/Texture2D.js"]={data:function(e,t,n,r,i,s){"use strict";function f(e){var t=e.file,r=e.url,i=e.data,s=e.texture;r?(this.name=r,i=new Image,i.src=r):t?(this.name=t,i=n(t)):s&&(this.name=s.name,i=s.imgElement),this.size={width:0,height:0},i instanceof a?(u.addListenerOnce(i,"load",this.dataDidLoad.bind(this,i)),this.imgElement=i.load()):r?(this.imgElement=i,this.imgElement.onload=this.dataDidLoad.bind(this,i)):(this.imgElement=i,this.dataDidLoad(i))}var o=t("util"),u=t("events"),a=t("remote_resources").RemoteResource;f.inherit(Object,{imgElement:null,size:null,name:null,isLoaded:!1,dataDidLoad:function(e){this.isLoaded=!0,this.size={width:this.imgElement.width,height:this.imgElement.height},u.trigger(this,"load",this)},drawAtPoint:function(e,t){if(!this.isLoaded)return;e.drawImage(this.imgElement,t.x,t.y)},drawInRect:function(e,t){if(!this.isLoaded)return;e.drawImage(this.imgElement,t.origin.x,t.origin.y,t.size.width,t.size.height)},get data(){return this.imgElement?this.imgElement.src:null},get contentSize(){return this.size},get pixelsWide(){return this.size.width},get pixelsHigh(){return this.size.height}}),e.Texture2D=f},mimetype:"application/javascript",remote:!1},t.resources["/libs/cocos2d/TextureAtlas.js"]={data:function(t,n,r,i,s,o){"use strict";function l(e){var t=e.file,n=e.url,r=e.data,i=e.texture,s=e.canvas;s?this.imgElement=s:(i=new f({url:n,texture:i,file:t,data:r}),a.addListenerOnce(i,"load",function(){a.trigger(this,"load")}.bind(this)),this.texture=i,this.imgElement=i.imgElement),this.quads=[]}var u=n("util"),a=n("events"),f=n("./Texture2D").Texture2D;l.inherit(Object,{quads:null,imgElement:null,texture:null,insertQuad:function(e){var t=e.quad,n=e.index||0;this.quads.splice(n,0,t)},removeQuad:function(e){var t=e.index;this.quads.splice(t,1)},drawQuads:function(e){this.quads.forEach(function(t){if(!t)return;this.drawQuad(e,t)}.bind(this))},drawQuad:function(t,n){var r=n.textureRect.origin.x,i=n.textureRect.origin.y,s=n.textureRect.size.width,o=n.textureRect.size.height,u=n.drawRect.origin.x,a=n.drawRect.origin.y,f=n.drawRect.size.width,l=n.drawRect.size.height,c=1,h=1;e.FLIP_Y_AXIS&&(a-=l,l*=-1),f<0&&(f*=-1,c=-1),l<0&&(l*=-1,h=-1),t.scale(c,h);var p=this.imgElement;t.drawImage(p,r,i,s,o,u,a,f,l),e.FLIP_Y_AXIS?t.scale(1,-1):t.scale(1,1)}}),t.TextureAtlas=l},mimetype:"application/javascript",remote:!1},t.resources["/libs/cocos2d/TMXOrientation.js"]={data:function(e,t,n,r,i,s){"use strict";var o={TMXOrientationOrtho:1,TMXOrientationHex:2,TMXOrientationIso:3};r.exports=o},mimetype:"application/javascript",remote:!1},t.resources["/libs/cocos2d/TMXXMLParser.js"]={data:function(t,n,r,i,s,o){"use strict";function m(){}function g(){this.properties={},this.offset=l(0,0)}function y(){this.properties={},this.objects={},this.offset=l(0,0)}function b(e){this.tilesets=[],this.layers=[],this.objectGroups=[],this.properties={},this.tileProperties={},this.filename=e.filename||e.file||"",this.parseXMLFile(e)}var u=n("util"),a=n("uri"),f=n("path"),l=n("geometry").ccp,c=n("base64"),h=n("gzip"),p=n("./TMXOrientation").TMXOrientationOrtho,d=n("./TMXOrientation").TMXOrientationHex,v=n("./TMXOrientation").TMXOrientationIso;m.inherit(Object,{name:"",firstGID:0,tileSize:null,spacing:0,margin:0,sourceImage:null,rectForGID:function(e){var t={size:{},origin:l(0,0)};t.size=u.copy(this.tileSize),e-=this.firstGID;var n=this.imageSize,r=Math.floor((n.width-this.margin*2+this.spacing)/(this.tileSize.width+this.spacing));return t.origin.x=e%r*(this.tileSize.width+this.spacing)+this.margin,t.origin.y=Math.floor(e/r)*(this.tileSize.height+this.spacing)+this.margin,t}}),g.inherit(Object,{name:"",layerSize:null,tiles:null,visible:!0,opacity:255,minGID:1e5,maxGID:0,properties:null,offset:null}),y.inherit(Object,{name:"",properties:null,offset:null,objects:null,getProperty:function(e){var t=e.name;return this.properties[t]},propertyNamed:function(e){return console.warn("TMXObjectGroup#propertyNamed is deprected. Use TMXTiledMap#getProperty instread"),this.getProperty(e)},getObject:function(e){var t=e.name,n=null;this.objects.forEach(function(e){e.name==t&&(n=e)});if(n!==null)return n},objectNamed:function(e){return console.warn("TMXObjectGroup#objectNamed is deprected. Use TMXObjectGroup#getObject instread"),this.getObject(e)}}),b.inherit(Object,{filename:"",orientation:0,mapSize:null,tileSize:null,layer:null,tilesets:null,objectGroups:null,properties:null,tileProperties:null,parseXMLFile:function(t){var n=new DOMParser,i;t.file?i=n.parseFromString(r(t.file),"text/xml"):t.xml&&(i=n.parseFromString(t.xml,"text/xml"));var s=i.documentElement;switch(s.getAttribute("orientation")){case"orthogonal":this.orientation=p;break;case"isometric":this.orientation=v;break;case"hexagonal":this.orientation=d;break;default:throw"cocos2d: TMXFomat: Unsupported orientation: "+s.getAttribute("orientation")}this.mapSize={width:parseInt(s.getAttribute("width"),10),height:parseInt(s.getAttribute("height"),10)},this.tileSize={width:parseInt(s.getAttribute("tilewidth"),10),height:parseInt(s.getAttribute("tileheight"),10)};var o=s.getElementsByTagName("tileset"),u,b,w,E,S;for(u=0,w=o.length;u<w;u++){var x=o[u],T=x.getAttribute("source"),N=new m;N.firstGID=parseInt(x.getAttribute("firstgid"),10);if(T){var C=f.join(f.dirname(t.file),T);x=n.parseFromString(r(C),"text/xml").documentElement}N.name=x.getAttribute("name"),x.getAttribute("spacing")&&(N.spacing=parseInt(x.getAttribute("spacing"),10)),x.getAttribute("margin")&&(N.margin=parseInt(x.getAttribute("margin"),10)),S={},S.width=parseInt(x.getAttribute("tilewidth"),10),S.height=parseInt(x.getAttribute("tileheight"),10),N.tileSize=S;var k=x.getElementsByTagName("image")[0];if(T)N.sourceImage=f.join(f.dirname(C),k.getAttribute("source"));else if(a.isURL(this.filename)){var L=f.dirname(this.filename);N.sourceImage=f.dirname(this.filename)+"/"+k.getAttribute("source")}else N.sourceImage=f.join(f.dirname(this.filename),k.getAttribute("source"));this.tilesets.push(N)}var A=s.getElementsByTagName("layer");for(u=0,w=A.length;u<w;u++){var O=A[u],M=O.getElementsByTagName("data")[0],_=new g;_.name=O.getAttribute("name"),O.getAttribute("visible")!==!1?_.visible=!0:_.visible=!!parseInt(O.getAttribute("visible"),10),S={},S.width=parseInt(O.getAttribute("width"),10),S.height=parseInt(O.getAttribute("height"),10),_.layerSize=S;var D=O.getAttribute("opacity");!D&&D!==0?_.opacity=255:_.opacity=255*parseFloat(D);var P=parseInt(O.getAttribute("x"),10),H=parseInt(O.getAttribute("y"),10);isNaN(P)&&(P=0),isNaN(H)&&(H=0),_.offset=l(P,H);var B="";for(b=0,E=M.childNodes.length;b<E;b++)B+=M.childNodes[b].nodeValue;var j=M.getAttribute("compression");switch(j){case"gzip":_.tiles=h.unzipBase64AsArray(B,4);break;case null:case"":_.tiles=c.decodeAsArray(B,4);break;default:throw"Unsupported TMX Tile Map compression: "+j}var F=O.querySelectorAll("properties > property"),I={},q;for(b=0;b<F.length;b++)q=F[b],q.getAttribute("name")&&(I[q.getAttribute("name")]=q.getAttribute("value"));_.properties=I,this.layers.push(_)}var R=s.getElementsByTagName("objectgroup");for(u=0,w=R.length;u<w;u++){var U=R[u],z=new y;z.name=U.getAttribute("name"),F=U.querySelectorAll("objectgroup > properties property"),I={},q;for(b=0;b<F.length;b++)q=F[b],q.getAttribute("name")&&(I[q.getAttribute("name")]=q.getAttribute("value"));z.properties=I;var W=[],X=U.querySelectorAll("object");for(b=0;b<X.length;b++){var V=X[b],$={x:parseInt(V.getAttribute("x"),10),y:parseInt(V.getAttribute("y"),10),width:parseInt(V.getAttribute("width"),10),height:parseInt(V.getAttribute("height"),10)};e.FLIP_Y_AXIS&&($.y=this.mapSize.height*this.tileSize.height-$.y-$.height),V.getAttribute("name")&&($.name=V.getAttribute("name")),V.getAttribute("type")&&($.type=V.getAttribute("type")),F=V.querySelectorAll("property");for(var J=0;J<F.length;J++)q=F[J],q.getAttribute("name")&&($[q.getAttribute("name")]=q.getAttribute("value"));W.push($)}z.objects=W,this.objectGroups.push(z)}var F=i.querySelectorAll("map > properties > property");for(u=0;u<F.length;u++){var q=F[u];q.getAttribute("name")&&(this.properties[q.getAttribute("name")]=q.getAttribute("value"))}}}),t.TMXMapInfo=b,t.TMXLayerInfo=g,t.TMXTilesetInfo=m,t.TMXObjectGroup=y},mimetype:"application/javascript",remote:!1},t.resources["/libs/cocos2d/TouchDispatcher.js"]={data:function(e,t,n,r,i,s){"use strict";function y(e,t){this.delegate=e,this.priority=t}function b(e,t){b.superclass.constructor.call(this,e,t)}function w(e,t,n){w.superclass.constructor.call(this,e,t),this.swallowsTouches=n,this.claimedTouches={}}function E(){this.standardHandlers=[],this.targetedHandlers=[],this._toRemove=!1,this._toAdd=!1,this._toQuit=!1,this._locked=!1,this._handlersToAdd=[],this._handlersToRemove=[]}var o=t("util"),u=t("geometry"),a=1,f=2,l=4,c=8,h=a|f|l|c,p=1,d=2,v=3,m=4,g=5;b.inherit(y),w.inherit(y),E.inherit(Object,{dispatchEvents:!0,standardHandlers:null,targetedHandlers:null,forceAddHandler:function(e,t){var n=0;t.forEach(function(t){t.priority<e.priority&&n++;if(t.delegate==e.delegate)throw new Error("Delegate already added to touch dispatcher")}.bind(this)),t.splice(n,0,e)},addStandardDelegate:function(e,t){var n=new b(e,t);this._locked?(this._handlersToAdd.push(n),this._toAdd=!0):this.forceAddHandler(n,this.standardHandlers)},addTargetedDelegate:function(e,t,n){var r=new w(e,t,!!n);this._locked?(this._handlersToAdd.push(r),this._toAdd=!0):this.forceAddHandler(r,this.targetedHandlers)},forceRemoveDelegate:function(e){var t,n;for(t=0;t<this.targetedHandlers.length;t++){n=this.targetedHandlers[t];if(n.delegate===e){this.targetedHandlers.splice(t,1),n.claimedTouches;break}}for(t=0;t<this.standardHandlers.length;t++){n=this.standardHandlers[t];if(n.delegate===e){this.standardHandlers.splice(t,1);break}}},removeDelegate:function(e){if(!e)return;this._locked?(this._handlersToRemove.push(e),this._toRemove=!0):this.forceRemoveDelegate(e)},forceRemoveAllDelegates:function(){this.standardHandlers.splice(0,this.standardHandlers.length),this.targetedHandlers.splice(0,this.targetedHandlers.length)},removeAllDelegates:function(){this._locked?this._toQuit=!0:this.forceRemoveAllDelegates()},findHandler:function(e){var t,n;for(t=0;t<this.targetedHandlers.length;t++){n=this.targetedHandlers[t];if(n.delegate===e)return n}for(t=0;t<this.standardHandlers.length;t++){n=this.standardHandlers[t];if(n.delegate===e)return n}return null},rearrangeHandlers:function(e){e.sort(function(e,t){return e.priority-t.priority})},setDelegatePriority:function(e,t){if(!e)throw new Error("Got nil touch delegate");var n=this.findHandler(e);if(!n)throw new Error("Delegate not found");n.priority=t,this.rearrangeHandlers(this.targetedHandlers),this.rearrangeHandlers(this.standardHandlers)},ontouches:function(e,n){this._locked=!0;var r=t("./Director").Director.sharedDirector,i,s,o,u,a,f=this.targetedHandlers.length&&this.standardHandlers.length,l=f?Array.prototype.splice.call(e.changedTouches,0):e.changedTouches;for(i=0;i<l.length;i++)o=l[i],o.locationInCanvas=r.convertTouchToCanvas(o);if(this.targetedHandlers.length>0){var c=!1;for(i=0;i<l.length;i++){o=l[i];for(s=0;s<this.targetedHandlers.length;s++){u=this.targetedHandlers[s],c=!1;if(n==p)u.delegate.touchBegan&&(c=u.delegate.touchBegan({touch:o,originalEvent:e})),c&&(u.claimedTouches[o.identifier]=o);else if(u.claimedTouches[o.identifier]){c=!0;switch(n){case d:u.delegate.touchMoved&&u.delegate.touchMoved({touch:o,originalEvent:e});break;case v:console.log("touch end"),u.delegate.touchEnded&&u.delegate.touchEnded({touch:o,originalEvent:e}),delete u.claimedTouches[o.identifier];break;case m:u.delegate.touchCancelled&&u.delegate.touchCancelled({touch:o,originalEvent:e}),delete u.claimedTouches[o.identifier]}}if(c&&u.swallowsTouches){f&&(a=l.indexOf(o),l.splice(a,1),i--);break}}}}if(this.standardHandlers.length>0&&l.length>0)for(s=0;s<this.standardHandlers.length;s++){u=this.standardHandlers[s];switch(n){case p:u.delegate.touchesBegan&&u.delegate.touchesBegan({touches:l,originalEvent:e});break;case d:u.delegate.touchesMoved&&u.delegate.touchesMoved({touches:l,originalEvent:e});break;case v:u.delegate.touchesEnded&&u.delegate.touchesEnded({touches:l,originalEvent:e});break;case m:u.delegate.touchesCancelled&&u.delegate.touchesCancelled({touches:l,originalEvent:e})}}this._locked=!1;if(this._toRemove){this._toRemove=!1;for(i=0;i<this._handlersToRemove.length;i++)this.forceRemoveDelegate(this._handlersToRemove[i]);this._handlersToRemove.splice(0,this._handlersToRemove.length)}if(this._toAdd){this._toAdd=!1;for(i=0;i<this._handlersToAdd.length;i++)u=this._handlersToAdd[i],u instanceof w?this.forceAddHandler(u,this.targetedHandlers):this.forceAddHandler(u,this.standardHandlers);this._handlersToAdd.splice(0,this._handlersToAdd.length)}this._toQuit&&(this._toQuit=!1,this.forceRemoveAllDelegates())},touchesBegan:function(e){this.dispatchEvents&&this.ontouches(e,p)},touchesMoved:function(e){this.dispatchEvents&&this.ontouches(e,d)},touchesEnded:function(e){this.dispatchEvents&&this.ontouches(e,v)},touchesCancelled:function(e){this.dispatchEvents&&this.ontouches(e,m)}}),Object.defineProperty(E,"sharedDispatcher",{get:function(){return E._instance||(E._instance=new this),E._instance},enumerable:!0}),e.TouchDispatcher=E,e.TouchHandler=y},mimetype:"application/javascript",remote:!1}}(),function(){t.resources["/main.js"]={data:function(t,n,r,i,s,o){var u={cocos:n("cocos2d"),events:n("events"),geo:n("geometry")},a="nodes actions".w,f,l,c;for(f in u){l=u[f];for(c in l)l.hasOwnProperty(c)&&a.indexOf(c)==-1&&(e[c]=l[c])}window.cc=e},mimetype:"application/javascript",remote:!1}}(),t.__triggerReady()})({STANDALONE:!0});
